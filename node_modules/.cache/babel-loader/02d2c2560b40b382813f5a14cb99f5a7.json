{"remainingRequest":"/Users/davislin/DavisLin/Case/erp/node_modules/babel-loader/lib/index.js!/Users/davislin/DavisLin/Case/erp/node_modules/eslint-loader/index.js??ref--13-0!/Users/davislin/DavisLin/Case/erp/src/assets/js/util.js","dependencies":[{"path":"/Users/davislin/DavisLin/Case/erp/src/assets/js/util.js","mtime":1582200500000},{"path":"/Users/davislin/DavisLin/Case/erp/node_modules/cache-loader/dist/cjs.js","mtime":1581314282653},{"path":"/Users/davislin/DavisLin/Case/erp/node_modules/babel-loader/lib/index.js","mtime":1587476708600},{"path":"/Users/davislin/DavisLin/Case/erp/node_modules/eslint-loader/index.js","mtime":1586170250463}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgbm8tc2NyaXB0LXVybCxqc3gtYTExeS9hbmNob3ItaXMtdmFsaWQsbm8tbG9vcC1mdW5jLG5vLXVuZGVmLG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyxzdHJpY3Qsbm8tdW51c2VkLXZhcnMsbm8tY29uZC1hc3NpZ24sZXFlcWVxLG5vLXRocm93LWxpdGVyYWwsbm8tdW5yZWFjaGFibGUsbm8tdXNlbGVzcy1lc2NhcGUsbm8tcmVkZWNsYXJlLG5vLXVzZWxlc3MtY29uY2F0LG5vLXVudXNlZC1leHByZXNzaW9ucyxuby1zZXF1ZW5jZXMgKi8KInVzZSBzdHJpY3QiOwovKioNCiAqIEBjbGFzcyBLVFV0aWwgIGJhc2UgdXRpbGl6ZSBjbGFzcyB0aGF0IHByaXZpZGVzIGhlbHBlciBmdW5jdGlvbnMNCiAqLwovLyBQb2x5ZmlsbHMKCi8qKg0KICogRWxlbWVudC5tYXRjaGVzKCkgcG9seWZpbGwgKHNpbXBsZSB2ZXJzaW9uKQ0KICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvbWF0Y2hlcyNQb2x5ZmlsbA0KICovCgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvVXNlcnMvZGF2aXNsaW4vRGF2aXNMaW4vQ2FzZS9lcnAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CgppZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHsKICBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yOwp9Ci8qKg0KICogRWxlbWVudC5jbG9zZXN0KCkgcG9seWZpbGwNCiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2Nsb3Nlc3QjUG9seWZpbGwNCiAqLwoKCmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkgewogIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykgewogICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjsKICB9CgogIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbiAocykgewogICAgdmFyIGVsID0gdGhpczsKICAgIHZhciBhbmNlc3RvciA9IHRoaXM7CiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsOwoKICAgIGRvIHsKICAgICAgaWYgKGFuY2VzdG9yLm1hdGNoZXMocykpIHJldHVybiBhbmNlc3RvcjsKICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnRFbGVtZW50OwogICAgfSB3aGlsZSAoYW5jZXN0b3IgIT09IG51bGwpOwoKICAgIHJldHVybiBudWxsOwogIH07Cn0KLyoqDQogKiBDaGlsZE5vZGUucmVtb3ZlKCkgcG9seWZpbGwNCiAqIGh0dHBzOi8vZ29tYWtldGhpbmdzLmNvbS9yZW1vdmluZy1hbi1lbGVtZW50LWZyb20tdGhlLWRvbS10aGUtZXM2LXdheS8NCiAqIEBhdXRob3IgQ2hyaXMgRmVyZGluYW5kaQ0KICogQGxpY2Vuc2UgTUlUDQogKi8KCgooZnVuY3Rpb24gKGVsZW0pIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW0ubGVuZ3RoOyBpKyspIHsKICAgIGlmICghd2luZG93W2VsZW1baV1dIHx8ICdyZW1vdmUnIGluIHdpbmRvd1tlbGVtW2ldXS5wcm90b3R5cGUpIGNvbnRpbnVlOwoKICAgIHdpbmRvd1tlbGVtW2ldXS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7CiAgICB9OwogIH0KfSkoWydFbGVtZW50JywgJ0NoYXJhY3RlckRhdGEnLCAnRG9jdW1lbnRUeXBlJ10pOyAvLwovLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGwgYnkgRXJpayBNw7ZsbGVyLgovLyAgV2l0aCBmaXhlcyBmcm9tIFBhdWwgSXJpc2ggYW5kIFRpbm8gWmlqZGVsCi8vCi8vICBodHRwOi8vcGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nLwovLyAgaHR0cDovL215Lm9wZXJhLmNvbS9lbW9sbGVyL2Jsb2cvMjAxMS8xMi8yMC9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWVyLWFuaW1hdGluZwovLwovLyAgTUlUIGxpY2Vuc2UKLy8KCgooZnVuY3Rpb24gKCkgewogIHZhciBsYXN0VGltZSA9IDA7CiAgdmFyIHZlbmRvcnMgPSBbJ3dlYmtpdCcsICdtb3onXTsKCiAgZm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7CiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107CiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArICdDYW5jZWxBbmltYXRpb25GcmFtZSddIHx8IHdpbmRvd1t2ZW5kb3JzW3hdICsgJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddOwogIH0KCiAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpOwogICAgdmFyIGlkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpOwogICAgfSwgdGltZVRvQ2FsbCk7CiAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDsKICAgIHJldHVybiBpZDsKICB9OwogIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHsKICAgIGNsZWFyVGltZW91dChpZCk7CiAgfTsKfSkoKTsgLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vanNlcnovanNfcGllY2UvYmxvYi9tYXN0ZXIvRE9NL1BhcmVudE5vZGUvcHJlcGVuZCgpL3ByZXBlbmQoKS5tZAoKCihmdW5jdGlvbiAoYXJyKSB7CiAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdwcmVwZW5kJykpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncHJlcGVuZCcsIHsKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBlbmQoKSB7CiAgICAgICAgdmFyIGFyZ0FyciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksCiAgICAgICAgICAgIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgYXJnQXJyLmZvckVhY2goZnVuY3Rpb24gKGFyZ0l0ZW0pIHsKICAgICAgICAgIHZhciBpc05vZGUgPSBhcmdJdGVtIGluc3RhbmNlb2YgTm9kZTsKICAgICAgICAgIGRvY0ZyYWcuYXBwZW5kQ2hpbGQoaXNOb2RlID8gYXJnSXRlbSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFN0cmluZyhhcmdJdGVtKSkpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaW5zZXJ0QmVmb3JlKGRvY0ZyYWcsIHRoaXMuZmlyc3RDaGlsZCk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9KShbRWxlbWVudC5wcm90b3R5cGUsIERvY3VtZW50LnByb3RvdHlwZSwgRG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGVdKTsgLy8gR2xvYmFsIHZhcmlhYmxlcwoKCndpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlID0ge307CndpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlSUQgPSAwOwp3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVycyA9IHt9OwoKdmFyIEtUVXRpbCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgcmVzaXplSGFuZGxlcnMgPSBbXTsKICAvKiogQHR5cGUge29iamVjdH0gYnJlYWtwb2ludHMgVGhlIGRldmljZSB3aWR0aCBicmVha3BvaW50cyAqKi8KCiAgdmFyIGJyZWFrcG9pbnRzID0gewogICAgc206IDU0NCwKICAgIC8vIFNtYWxsIHNjcmVlbiAvIHBob25lCiAgICBtZDogNzY4LAogICAgLy8gTWVkaXVtIHNjcmVlbiAvIHRhYmxldAogICAgbGc6IDEwMjQsCiAgICAvLyBMYXJnZSBzY3JlZW4gLyBkZXNrdG9wCiAgICB4bDogMTIwMCAvLyBFeHRyYSBsYXJnZSBzY3JlZW4gLyB3aWRlIGRlc2t0b3AKCiAgfTsKICAvKioNCiAgICogSGFuZGxlIHdpbmRvdyByZXNpemUgZXZlbnQgd2l0aCBzb21lDQogICAqIGRlbGF5IHRvIGF0dGFjaCBldmVudCBoYW5kbGVycyB1cG9uIHJlc2l6ZSBjb21wbGV0ZQ0KICAgKi8KCiAgdmFyIF93aW5kb3dSZXNpemVIYW5kbGVyID0gZnVuY3Rpb24gX3dpbmRvd1Jlc2l6ZUhhbmRsZXIoKSB7CiAgICB2YXIgX3J1blJlc2l6ZUhhbmRsZXJzID0gZnVuY3Rpb24gX3J1blJlc2l6ZUhhbmRsZXJzKCkgewogICAgICAvLyByZWluaXRpYWxpemUgb3RoZXIgc3Vic2NyaWJlZCBlbGVtZW50cwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc2l6ZUhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGVhY2ggPSByZXNpemVIYW5kbGVyc1tpXTsKICAgICAgICBlYWNoLmNhbGwoKTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgdGltZW91dCA9IGZhbHNlOyAvLyBob2xkZXIgZm9yIHRpbWVvdXQgaWQKCiAgICB2YXIgZGVsYXkgPSAyNTA7IC8vIGRlbGF5IGFmdGVyIGV2ZW50IGlzICJjb21wbGV0ZSIgdG8gcnVuIGNhbGxiYWNrCgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3J1blJlc2l6ZUhhbmRsZXJzKCk7CiAgICAgIH0sIGRlbGF5KTsgLy8gd2FpdCA1MG1zIHVudGlsIHdpbmRvdyByZXNpemUgZmluaXNoZXMuCiAgICB9KTsKICB9OwoKICByZXR1cm4gewogICAgLyoqDQogICAgICogQ2xhc3MgbWFpbiBpbml0aWFsaXplci4NCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy4NCiAgICAgKiBAcmV0dXJucyBudWxsDQogICAgICovCiAgICAvL21haW4gZnVuY3Rpb24gdG8gaW5pdGlhdGUgdGhlIHRoZW1lCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5icmVha3BvaW50cykgewogICAgICAgIGJyZWFrcG9pbnRzID0gb3B0aW9ucy5icmVha3BvaW50czsKICAgICAgfQoKICAgICAgX3dpbmRvd1Jlc2l6ZUhhbmRsZXIoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQWRkcyB3aW5kb3cgcmVzaXplIGV2ZW50IGhhbmRsZXIuDQogICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24uDQogICAgICovCiAgICBhZGRSZXNpemVIYW5kbGVyOiBmdW5jdGlvbiBhZGRSZXNpemVIYW5kbGVyKGNhbGxiYWNrKSB7CiAgICAgIHJlc2l6ZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBSZW1vdmVzIHdpbmRvdyByZXNpemUgZXZlbnQgaGFuZGxlci4NCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbi4NCiAgICAgKi8KICAgIHJlbW92ZVJlc2l6ZUhhbmRsZXI6IGZ1bmN0aW9uIHJlbW92ZVJlc2l6ZUhhbmRsZXIoY2FsbGJhY2spIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNpemVIYW5kbGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChjYWxsYmFjayA9PT0gcmVzaXplSGFuZGxlcnNbaV0pIHsKICAgICAgICAgIGRlbGV0ZSByZXNpemVIYW5kbGVyc1tpXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogVHJpZ2dlciB3aW5kb3cgcmVzaXplIGhhbmRsZXJzLg0KICAgICAqLwogICAgcnVuUmVzaXplSGFuZGxlcnM6IGZ1bmN0aW9uIHJ1blJlc2l6ZUhhbmRsZXJzKCkgewogICAgICBfcnVuUmVzaXplSGFuZGxlcnMoKTsKICAgIH0sCiAgICByZXNpemU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgaWYgKHR5cGVvZiBFdmVudCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIG1vZGVybiBicm93c2VycwogICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGZvciBJRSBhbmQgb3RoZXIgb2xkIGJyb3dzZXJzCiAgICAgICAgLy8gY2F1c2VzIGRlcHJlY2F0aW9uIHdhcm5pbmcgb24gbW9kZXJuIGJyb3dzZXJzCiAgICAgICAgdmFyIGV2dCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFdmVudCgnVUlFdmVudHMnKTsKICAgICAgICBldnQuaW5pdFVJRXZlbnQoJ3Jlc2l6ZScsIHRydWUsIGZhbHNlLCB3aW5kb3csIDApOwogICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2dCk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogR2V0IEdFVCBwYXJhbWV0ZXIgdmFsdWUgZnJvbSBVUkwuDQogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtTmFtZSBQYXJhbWV0ZXIgbmFtZS4NCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQ0KICAgICAqLwogICAgZ2V0VVJMUGFyYW06IGZ1bmN0aW9uIGdldFVSTFBhcmFtKHBhcmFtTmFtZSkgewogICAgICB2YXIgc2VhcmNoU3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSksCiAgICAgICAgICBpLAogICAgICAgICAgdmFsLAogICAgICAgICAgcGFyYW1zID0gc2VhcmNoU3RyaW5nLnNwbGl0KCImIik7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFsID0gcGFyYW1zW2ldLnNwbGl0KCI9Iik7CgogICAgICAgIGlmICh2YWxbMF0gPT0gcGFyYW1OYW1lKSB7CiAgICAgICAgICByZXR1cm4gdW5lc2NhcGUodmFsWzFdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDaGVja3Mgd2hldGhlciBjdXJyZW50IGRldmljZSBpcyBtb2JpbGUgdG91Y2guDQogICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICovCiAgICBpc01vYmlsZURldmljZTogZnVuY3Rpb24gaXNNb2JpbGVEZXZpY2UoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFZpZXdQb3J0KCkud2lkdGggPCB0aGlzLmdldEJyZWFrcG9pbnQoJ2xnJykgPyB0cnVlIDogZmFsc2U7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENoZWNrcyB3aGV0aGVyIGN1cnJlbnQgZGV2aWNlIGlzIGRlc2t0b3AuDQogICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICovCiAgICBpc0Rlc2t0b3BEZXZpY2U6IGZ1bmN0aW9uIGlzRGVza3RvcERldmljZSgpIHsKICAgICAgcmV0dXJuIEtUVXRpbC5pc01vYmlsZURldmljZSgpID8gZmFsc2UgOiB0cnVlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBHZXRzIGJyb3dzZXIgd2luZG93IHZpZXdwb3J0IHNpemUuIFJlZjoNCiAgICAgKiBodHRwOi8vYW5keWxhbmd0b24uY28udWsvYXJ0aWNsZXMvamF2YXNjcmlwdC9nZXQtdmlld3BvcnQtc2l6ZS1qYXZhc2NyaXB0Lw0KICAgICAqIEByZXR1cm5zIHtvYmplY3R9DQogICAgICovCiAgICBnZXRWaWV3UG9ydDogZnVuY3Rpb24gZ2V0Vmlld1BvcnQoKSB7CiAgICAgIHZhciBlID0gd2luZG93LAogICAgICAgICAgYSA9ICdpbm5lcic7CgogICAgICBpZiAoISgnaW5uZXJXaWR0aCcgaW4gd2luZG93KSkgewogICAgICAgIGEgPSAnY2xpZW50JzsKICAgICAgICBlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IGVbYSArICdXaWR0aCddLAogICAgICAgIGhlaWdodDogZVthICsgJ0hlaWdodCddCiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIGRldmljZSBtb2RlIGlzIGN1cnJlbnRseSBhY3RpdmF0ZWQuDQogICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgUmVzcG9uc2l2ZSBtb2RlIG5hbWUoZS5nOiBkZXNrdG9wLA0KICAgICAqICAgICBkZXNrdG9wLWFuZC10YWJsZXQsIHRhYmxldCwgdGFibGV0LWFuZC1tb2JpbGUsIG1vYmlsZSkNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGlzSW5SZXNwb25zaXZlUmFuZ2U6IGZ1bmN0aW9uIGlzSW5SZXNwb25zaXZlUmFuZ2UobW9kZSkgewogICAgICB2YXIgYnJlYWtwb2ludCA9IHRoaXMuZ2V0Vmlld1BvcnQoKS53aWR0aDsKCiAgICAgIGlmIChtb2RlID09ICdnZW5lcmFsJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ2Rlc2t0b3AnICYmIGJyZWFrcG9pbnQgPj0gdGhpcy5nZXRCcmVha3BvaW50KCdsZycpICsgMSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ3RhYmxldCcgJiYgYnJlYWtwb2ludCA+PSB0aGlzLmdldEJyZWFrcG9pbnQoJ21kJykgKyAxICYmIGJyZWFrcG9pbnQgPCB0aGlzLmdldEJyZWFrcG9pbnQoJ2xnJykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChtb2RlID09ICdtb2JpbGUnICYmIGJyZWFrcG9pbnQgPD0gdGhpcy5nZXRCcmVha3BvaW50KCdtZCcpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PSAnZGVza3RvcC1hbmQtdGFibGV0JyAmJiBicmVha3BvaW50ID49IHRoaXMuZ2V0QnJlYWtwb2ludCgnbWQnKSArIDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChtb2RlID09ICd0YWJsZXQtYW5kLW1vYmlsZScgJiYgYnJlYWtwb2ludCA8PSB0aGlzLmdldEJyZWFrcG9pbnQoJ2xnJykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChtb2RlID09ICdtaW5pbWFsLWRlc2t0b3AtYW5kLWJlbG93JyAmJiBicmVha3BvaW50IDw9IHRoaXMuZ2V0QnJlYWtwb2ludCgneGwnKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdlbmVyYXRlcyB1bmlxdWUgSUQgZm9yIGdpdmUgcHJlZml4Lg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXggUHJlZml4IGZvciBnZW5lcmF0ZWQgSUQNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGdldFVuaXF1ZUlEOiBmdW5jdGlvbiBnZXRVbmlxdWVJRChwcmVmaXgpIHsKICAgICAgcmV0dXJuIHByZWZpeCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKICAgIH0sCgogICAgLyoqDQogICAgICogR2V0cyB3aW5kb3cgd2lkdGggZm9yIGdpdmUgYnJlYWtwb2ludCBtb2RlLg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIFJlc3BvbnNpdmUgbW9kZSBuYW1lKGUuZzogeGwsIGxnLCBtZCwgc20pDQogICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgKi8KICAgIGdldEJyZWFrcG9pbnQ6IGZ1bmN0aW9uIGdldEJyZWFrcG9pbnQobW9kZSkgewogICAgICByZXR1cm4gYnJlYWtwb2ludHNbbW9kZV07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENoZWNrcyB3aGV0aGVyIG9iamVjdCBoYXMgcHJvcGVydHkgbWF0Y2hzIGdpdmVuIGtleSBwYXRoLg0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmogT2JqZWN0IGNvbnRhaW5zIHZhbHVlcyBwYWlyZWQgd2l0aCBnaXZlbiBrZXkgcGF0aA0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlzIEtleXMgcGF0aCBzZXBlcmF0ZWQgd2l0aCBkb3RzDQogICAgICogQHJldHVybnMge29iamVjdH0NCiAgICAgKi8KICAgIGlzc2V0OiBmdW5jdGlvbiBpc3NldChvYmosIGtleXMpIHsKICAgICAgdmFyIHN0b25lOwogICAgICBrZXlzID0ga2V5cyB8fCAnJzsKCiAgICAgIGlmIChrZXlzLmluZGV4T2YoJ1snKSAhPT0gLTEpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIG9iamVjdCBwYXRoIG5vdGF0aW9uLicpOwogICAgICB9CgogICAgICBrZXlzID0ga2V5cy5zcGxpdCgnLicpOwoKICAgICAgZG8gewogICAgICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc3RvbmUgPSBrZXlzLnNoaWZ0KCk7CgogICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHN0b25lKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgb2JqID0gb2JqW3N0b25lXTsKICAgICAgfSB3aGlsZSAoa2V5cy5sZW5ndGgpOwoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdldHMgaGlnaGVzdCB6LWluZGV4IG9mIHRoZSBnaXZlbiBlbGVtZW50IHBhcmVudHMNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZWwgalF1ZXJ5IGVsZW1lbnQgb2JqZWN0DQogICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgKi8KICAgIGdldEhpZ2hlc3RaaW5kZXg6IGZ1bmN0aW9uIGdldEhpZ2hlc3RaaW5kZXgoZWwpIHsKICAgICAgdmFyIGVsZW0gPSBLVFV0aWwuZ2V0KGVsKSwKICAgICAgICAgIHBvc2l0aW9uLAogICAgICAgICAgdmFsdWU7CgogICAgICB3aGlsZSAoZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudCkgewogICAgICAgIC8vIElnbm9yZSB6LWluZGV4IGlmIHBvc2l0aW9uIGlzIHNldCB0byBhIHZhbHVlIHdoZXJlIHotaW5kZXggaXMgaWdub3JlZCBieSB0aGUgYnJvd3NlcgogICAgICAgIC8vIFRoaXMgbWFrZXMgYmVoYXZpb3Igb2YgdGhpcyBmdW5jdGlvbiBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycwogICAgICAgIC8vIFdlYktpdCBhbHdheXMgcmV0dXJucyBhdXRvIGlmIHRoZSBlbGVtZW50IGlzIHBvc2l0aW9uZWQKICAgICAgICBwb3NpdGlvbiA9IEtUVXRpbC5jc3MoZWxlbSwgJ3Bvc2l0aW9uJyk7CgogICAgICAgIGlmIChwb3NpdGlvbiA9PT0gImFic29sdXRlIiB8fCBwb3NpdGlvbiA9PT0gInJlbGF0aXZlIiB8fCBwb3NpdGlvbiA9PT0gImZpeGVkIikgewogICAgICAgICAgLy8gSUUgcmV0dXJucyAwIHdoZW4gekluZGV4IGlzIG5vdCBzcGVjaWZpZWQKICAgICAgICAgIC8vIG90aGVyIGJyb3dzZXJzIHJldHVybiBhIHN0cmluZwogICAgICAgICAgLy8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDAKICAgICAgICAgIC8vIDxkaXYgc3R5bGU9InotaW5kZXg6IC0xMDsiPjxkaXYgc3R5bGU9InotaW5kZXg6IDA7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgIHZhbHVlID0gcGFyc2VJbnQoS1RVdGlsLmNzcyhlbGVtLCAnei1pbmRleCcpKTsKCiAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSAhPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBlbGVtID0gZWxlbS5wYXJlbnROb2RlOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGVsZW1lbnQgaGFzIGFueSBwYXJlbnQgd2l0aCBmaXhlZCBwb3NpdGlvbmZyZWcNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZWwgalF1ZXJ5IGVsZW1lbnQgb2JqZWN0DQogICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICovCiAgICBoYXNGaXhlZFBvc2l0aW9uZWRQYXJlbnQ6IGZ1bmN0aW9uIGhhc0ZpeGVkUG9zaXRpb25lZFBhcmVudChlbCkgewogICAgICB2YXIgcG9zaXRpb247CgogICAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGRvY3VtZW50KSB7CiAgICAgICAgcG9zaXRpb24gPSBLVFV0aWwuY3NzKGVsLCAncG9zaXRpb24nKTsKCiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAiZml4ZWQiKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBTaW11bGF0ZXMgZGVsYXkNCiAgICAgKi8KICAgIHNsZWVwOiBmdW5jdGlvbiBzbGVlcChtaWxsaXNlY29uZHMpIHsKICAgICAgdmFyIHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDFlNzsgaSsrKSB7CiAgICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQgPiBtaWxsaXNlY29uZHMpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBHZXRzIHJhbmRvbWx5IGdlbmVyYXRlZCBpbnRlZ2VyIHZhbHVlIHdpdGhpbiBnaXZlbiBtaW4gYW5kIG1heCByYW5nZQ0KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gUmFuZ2Ugc3RhcnQgdmFsdWUNCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4IFJhbmdlIGVuZCB2YWx1ZQ0KICAgICAqIEByZXR1cm5zIHtudW1iZXJ9DQogICAgICovCiAgICBnZXRSYW5kb21JbnQ6IGZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkgewogICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2hlY2tzIHdoZXRoZXIgQW5ndWxhciBsaWJyYXJ5IGlzIGluY2x1ZGVkDQogICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICovCiAgICBpc0FuZ3VsYXJWZXJzaW9uOiBmdW5jdGlvbiBpc0FuZ3VsYXJWZXJzaW9uKCkgewogICAgICByZXR1cm4gd2luZG93LlpvbmUgIT09IHVuZGVmaW5lZCA/IHRydWUgOiBmYWxzZTsKICAgIH0sCiAgICAvLyBqUXVlcnkgV29ya2Fyb3VuZHMKICAgIC8vIERlZXAgZXh0ZW5kOiAgJC5leHRlbmQodHJ1ZSwge30sIG9iakEsIG9iakIpOwogICAgZGVlcEV4dGVuZDogZnVuY3Rpb24gZGVlcEV4dGVuZChvdXQpIHsKICAgICAgb3V0ID0gb3V0IHx8IHt9OwoKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldOwogICAgICAgIGlmICghb2JqKSBjb250aW51ZTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICAgIGlmIChfdHlwZW9mKG9ialtrZXldKSA9PT0gJ29iamVjdCcpIG91dFtrZXldID0gS1RVdGlsLmRlZXBFeHRlbmQob3V0W2tleV0sIG9ialtrZXldKTtlbHNlIG91dFtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIC8vIGV4dGVuZDogICQuZXh0ZW5kKHt9LCBvYmpBLCBvYmpCKTsKICAgIGV4dGVuZDogZnVuY3Rpb24gZXh0ZW5kKG91dCkgewogICAgICBvdXQgPSBvdXQgfHwge307CgogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICghYXJndW1lbnRzW2ldKSBjb250aW51ZTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIGFyZ3VtZW50c1tpXSkgewogICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXS5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvdXRba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBnZXQ6IGZ1bmN0aW9uIGdldChxdWVyeSkgewogICAgICB2YXIgZWw7CgogICAgICBpZiAocXVlcnkgPT09IGRvY3VtZW50KSB7CiAgICAgICAgcmV0dXJuIGRvY3VtZW50OwogICAgICB9CgogICAgICBpZiAoISEocXVlcnkgJiYgcXVlcnkubm9kZVR5cGUgPT09IDEpKSB7CiAgICAgICAgcmV0dXJuIHF1ZXJ5OwogICAgICB9CgogICAgICBpZiAoZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChxdWVyeSkpIHsKICAgICAgICByZXR1cm4gZWw7CiAgICAgIH0gZWxzZSBpZiAoZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShxdWVyeSksIGVsLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gZWxbMF07CiAgICAgIH0gZWxzZSBpZiAoZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHF1ZXJ5KSwgZWwubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBlbFswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGdldEJ5SUQ6IGZ1bmN0aW9uIGdldEJ5SUQocXVlcnkpIHsKICAgICAgaWYgKCEhKHF1ZXJ5ICYmIHF1ZXJ5Lm5vZGVUeXBlID09PSAxKSkgewogICAgICAgIHJldHVybiBxdWVyeTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHF1ZXJ5KTsKICAgIH0sCiAgICBnZXRCeVRhZzogZnVuY3Rpb24gZ2V0QnlUYWcocXVlcnkpIHsKICAgICAgdmFyIGVsOwoKICAgICAgaWYgKGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocXVlcnkpKSB7CiAgICAgICAgcmV0dXJuIGVsWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgZ2V0QnlDbGFzczogZnVuY3Rpb24gZ2V0QnlDbGFzcyhxdWVyeSkgewogICAgICB2YXIgZWw7CgogICAgICBpZiAoZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHF1ZXJ5KSkgewogICAgICAgIHJldHVybiBlbFswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZWxlbWVudCBoYXMgZ2l2ZW4gY2xhc3Nlcw0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlbCBqUXVlcnkgZWxlbWVudCBvYmplY3QNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gQ2xhc3NlcyBzdHJpbmcNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGhhc0NsYXNzZXM6IGZ1bmN0aW9uIGhhc0NsYXNzZXMoZWwsIGNsYXNzZXMpIHsKICAgICAgaWYgKCFlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGNsYXNzZXNBcnIgPSBjbGFzc2VzLnNwbGl0KCIgIik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoS1RVdGlsLmhhc0NsYXNzKGVsLCBLVFV0aWwudHJpbShjbGFzc2VzQXJyW2ldKSkgPT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGhhc0NsYXNzOiBmdW5jdGlvbiBoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSB7CiAgICAgIGlmICghZWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSA6IG5ldyBSZWdFeHAoJ1xcYicgKyBjbGFzc05hbWUgKyAnXFxiJykudGVzdChlbC5jbGFzc05hbWUpOwogICAgfSwKICAgIGFkZENsYXNzOiBmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7CiAgICAgIGlmICghZWwgfHwgdHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjbGFzc05hbWVzID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7CgogICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc05hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoY2xhc3NOYW1lc1tpXSAmJiBjbGFzc05hbWVzW2ldLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChLVFV0aWwudHJpbShjbGFzc05hbWVzW2ldKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCFLVFV0aWwuaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkpIHsKICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNsYXNzTmFtZXMubGVuZ3RoOyB4KyspIHsKICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBLVFV0aWwudHJpbShjbGFzc05hbWVzW3hdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgICBpZiAoIWVsIHx8IHR5cGVvZiBjbGFzc05hbWUgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpOwoKICAgICAgaWYgKGVsLmNsYXNzTGlzdCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xhc3NOYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShLVFV0aWwudHJpbShjbGFzc05hbWVzW2ldKSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKEtUVXRpbC5oYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkgewogICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2xhc3NOYW1lcy5sZW5ndGg7IHgrKykgewogICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxiJyArIEtUVXRpbC50cmltKGNsYXNzTmFtZXNbeF0pICsgJ1xcYicsICdnJyksICcnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0cmlnZ2VyQ3VzdG9tRXZlbnQ6IGZ1bmN0aW9uIHRyaWdnZXJDdXN0b21FdmVudChlbCwgZXZlbnROYW1lLCBkYXRhKSB7CiAgICAgIHZhciBldmVudDsKCiAgICAgIGlmICh3aW5kb3cuQ3VzdG9tRXZlbnQpIHsKICAgICAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsKICAgICAgICAgIGRldGFpbDogZGF0YQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7CiAgICAgICAgZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSwgZGF0YSk7CiAgICAgIH0KCiAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgfSwKICAgIHRyaWdnZXJFdmVudDogZnVuY3Rpb24gdHJpZ2dlckV2ZW50KG5vZGUsIGV2ZW50TmFtZSkgewogICAgICAvLyBNYWtlIHN1cmUgd2UgdXNlIHRoZSBvd25lckRvY3VtZW50IGZyb20gdGhlIHByb3ZpZGVkIG5vZGUgdG8gYXZvaWQgY3Jvc3Mtd2luZG93IHByb2JsZW1zCiAgICAgIHZhciBkb2M7CgogICAgICBpZiAobm9kZS5vd25lckRvY3VtZW50KSB7CiAgICAgICAgZG9jID0gbm9kZS5vd25lckRvY3VtZW50OwogICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gOSkgewogICAgICAgIC8vIHRoZSBub2RlIG1heSBiZSB0aGUgZG9jdW1lbnQgaXRzZWxmLCBub2RlVHlwZSA5ID0gRE9DVU1FTlRfTk9ERQogICAgICAgIGRvYyA9IG5vZGU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG5vZGUgcGFzc2VkIHRvIGZpcmVFdmVudDogIiArIG5vZGUuaWQpOwogICAgICB9CgogICAgICBpZiAobm9kZS5kaXNwYXRjaEV2ZW50KSB7CiAgICAgICAgLy8gR2Vja28tc3R5bGUgYXBwcm9hY2ggKG5vdyB0aGUgc3RhbmRhcmQpIHRha2VzIG1vcmUgd29yawogICAgICAgIHZhciBldmVudENsYXNzID0gIiI7IC8vIERpZmZlcmVudCBldmVudHMgaGF2ZSBkaWZmZXJlbnQgZXZlbnQgY2xhc3Nlcy4KICAgICAgICAvLyBJZiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQgY2FuJ3QgbWFwIGFuIGV2ZW50TmFtZSB0byBhbiBldmVudENsYXNzLAogICAgICAgIC8vIHRoZSBldmVudCBmaXJpbmcgaXMgZ29pbmcgdG8gZmFpbC4KCiAgICAgICAgc3dpdGNoIChldmVudE5hbWUpIHsKICAgICAgICAgIGNhc2UgImNsaWNrIjogLy8gRGlzcGF0Y2hpbmcgb2YgJ2NsaWNrJyBhcHBlYXJzIHRvIG5vdCB3b3JrIGNvcnJlY3RseSBpbiBTYWZhcmkuIFVzZSAnbW91c2Vkb3duJyBvciAnbW91c2V1cCcgaW5zdGVhZC4KCiAgICAgICAgICBjYXNlICJtb3VzZWVudGVyIjoKICAgICAgICAgIGNhc2UgIm1vdXNlbGVhdmUiOgogICAgICAgICAgY2FzZSAibW91c2Vkb3duIjoKICAgICAgICAgIGNhc2UgIm1vdXNldXAiOgogICAgICAgICAgICBldmVudENsYXNzID0gIk1vdXNlRXZlbnRzIjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAiZm9jdXMiOgogICAgICAgICAgY2FzZSAiY2hhbmdlIjoKICAgICAgICAgIGNhc2UgImJsdXIiOgogICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgZXZlbnRDbGFzcyA9ICJIVE1MRXZlbnRzIjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgImZpcmVFdmVudDogQ291bGRuJ3QgZmluZCBhbiBldmVudCBjbGFzcyBmb3IgZXZlbnQgJyIgKyBldmVudE5hbWUgKyAiJy4iOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHZhciBldmVudCA9IGRvYy5jcmVhdGVFdmVudChldmVudENsYXNzKTsKICAgICAgICB2YXIgYnViYmxlcyA9IGV2ZW50TmFtZSA9PSAiY2hhbmdlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICBldmVudC5pbml0RXZlbnQoZXZlbnROYW1lLCBidWJibGVzLCB0cnVlKTsgLy8gQWxsIGV2ZW50cyBjcmVhdGVkIGFzIGJ1YmJsaW5nIGFuZCBjYW5jZWxhYmxlLgoKICAgICAgICBldmVudC5zeW50aGV0aWMgPSB0cnVlOyAvLyBhbGxvdyBkZXRlY3Rpb24gb2Ygc3ludGhldGljIGV2ZW50cwogICAgICAgIC8vIFRoZSBzZWNvbmQgcGFyYW1ldGVyIHNheXMgZ28gYWhlYWQgd2l0aCB0aGUgZGVmYXVsdCBhY3Rpb24KCiAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50LCB0cnVlKTsKICAgICAgfSBlbHNlIGlmIChub2RlLmZpcmVFdmVudCkgewogICAgICAgIC8vIElFLW9sZCBzY2hvb2wgc3R5bGUKICAgICAgICB2YXIgZXZlbnQgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTsKICAgICAgICBldmVudC5zeW50aGV0aWMgPSB0cnVlOyAvLyBhbGxvdyBkZXRlY3Rpb24gb2Ygc3ludGhldGljIGV2ZW50cwoKICAgICAgICBub2RlLmZpcmVFdmVudCgib24iICsgZXZlbnROYW1lLCBldmVudCk7CiAgICAgIH0KICAgIH0sCiAgICBpbmRleDogZnVuY3Rpb24gaW5kZXgoZWxtKSB7CiAgICAgIGVsbSA9IEtUVXRpbC5nZXQoZWxtKTsKICAgICAgdmFyIGMgPSBlbG0ucGFyZW50Tm9kZS5jaGlsZHJlbiwKICAgICAgICAgIGkgPSAwOwoKICAgICAgZm9yICg7IGkgPCBjLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGNbaV0gPT0gZWxtKSByZXR1cm4gaTsKICAgICAgfQogICAgfSwKICAgIHRyaW06IGZ1bmN0aW9uIHRyaW0oc3RyaW5nKSB7CiAgICAgIHJldHVybiBzdHJpbmcudHJpbSgpOwogICAgfSwKICAgIGV2ZW50VHJpZ2dlcmVkOiBmdW5jdGlvbiBldmVudFRyaWdnZXJlZChlKSB7CiAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50cmlnZ2VyZWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50cmlnZ2VyZWQgPSB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGVsKSB7CiAgICAgIGlmIChlbCAmJiBlbC5wYXJlbnROb2RlKSB7CiAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kOiBmdW5jdGlvbiBmaW5kKHBhcmVudCwgcXVlcnkpIHsKICAgICAgcGFyZW50ID0gS1RVdGlsLmdldChwYXJlbnQpOwoKICAgICAgaWYgKHBhcmVudCkgewogICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kQWxsOiBmdW5jdGlvbiBmaW5kQWxsKHBhcmVudCwgcXVlcnkpIHsKICAgICAgcGFyZW50ID0gS1RVdGlsLmdldChwYXJlbnQpOwoKICAgICAgaWYgKHBhcmVudCkgewogICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSk7CiAgICAgIH0KICAgIH0sCiAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIoZWwsIHJlZmVyZW5jZU5vZGUpIHsKICAgICAgcmV0dXJuIHJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHJlZmVyZW5jZU5vZGUubmV4dFNpYmxpbmcpOwogICAgfSwKICAgIHBhcmVudHM6IGZ1bmN0aW9uIHBhcmVudHMoZWxlbSwgc2VsZWN0b3IpIHsKICAgICAgLy8gRWxlbWVudC5tYXRjaGVzKCkgcG9seWZpbGwKICAgICAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7CiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgZnVuY3Rpb24gKHMpIHsKICAgICAgICAgIHZhciBtYXRjaGVzID0gKHRoaXMuZG9jdW1lbnQgfHwgdGhpcy5vd25lckRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHMpLAogICAgICAgICAgICAgIGkgPSBtYXRjaGVzLmxlbmd0aDsKCiAgICAgICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2hlcy5pdGVtKGkpICE9PSB0aGlzKSB7fQoKICAgICAgICAgIHJldHVybiBpID4gLTE7CiAgICAgICAgfTsKICAgICAgfSAvLyBTZXQgdXAgYSBwYXJlbnQgYXJyYXkKCgogICAgICB2YXIgcGFyZW50cyA9IFtdOyAvLyBQdXNoIGVhY2ggcGFyZW50IGVsZW1lbnQgdG8gdGhlIGFycmF5CgogICAgICBmb3IgKDsgZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudDsgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgewogICAgICAgIGlmIChzZWxlY3RvcikgewogICAgICAgICAgaWYgKGVsZW0ubWF0Y2hlcyhzZWxlY3RvcikpIHsKICAgICAgICAgICAgcGFyZW50cy5wdXNoKGVsZW0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgcGFyZW50cy5wdXNoKGVsZW0pOwogICAgICB9IC8vIFJldHVybiBvdXIgcGFyZW50IGFycmF5CgoKICAgICAgcmV0dXJuIHBhcmVudHM7CiAgICB9LAogICAgY2hpbGRyZW46IGZ1bmN0aW9uIGNoaWxkcmVuKGVsLCBzZWxlY3RvciwgbG9nKSB7CiAgICAgIGlmICghZWwgfHwgIWVsLmNoaWxkTm9kZXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSBbXSwKICAgICAgICAgIGkgPSAwLAogICAgICAgICAgbCA9IGVsLmNoaWxkTm9kZXMubGVuZ3RoOwoKICAgICAgZm9yICh2YXIgaTsgaSA8IGw7ICsraSkgewogICAgICAgIGlmIChlbC5jaGlsZE5vZGVzW2ldLm5vZGVUeXBlID09IDEgJiYgS1RVdGlsLm1hdGNoZXMoZWwuY2hpbGROb2Rlc1tpXSwgc2VsZWN0b3IsIGxvZykpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGVsLmNoaWxkTm9kZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBjaGlsZDogZnVuY3Rpb24gY2hpbGQoZWwsIHNlbGVjdG9yLCBsb2cpIHsKICAgICAgdmFyIGNoaWxkcmVuID0gS1RVdGlsLmNoaWxkcmVuKGVsLCBzZWxlY3RvciwgbG9nKTsKICAgICAgcmV0dXJuIGNoaWxkcmVuID8gY2hpbGRyZW5bMF0gOiBudWxsOwogICAgfSwKICAgIG1hdGNoZXM6IGZ1bmN0aW9uIG1hdGNoZXMoZWwsIHNlbGVjdG9yLCBsb2cpIHsKICAgICAgdmFyIHAgPSBFbGVtZW50LnByb3RvdHlwZTsKCiAgICAgIHZhciBmID0gcC5tYXRjaGVzIHx8IHAud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IHAubW96TWF0Y2hlc1NlbGVjdG9yIHx8IHAubXNNYXRjaGVzU2VsZWN0b3IgfHwgZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gW10uaW5kZXhPZi5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocyksIHRoaXMpICE9PSAtMTsKICAgICAgfTsKCiAgICAgIGlmIChlbCAmJiBlbC50YWdOYW1lKSB7CiAgICAgICAgcmV0dXJuIGYuY2FsbChlbCwgc2VsZWN0b3IpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoZWxlbWVudCkgewogICAgICBlbGVtZW50ID0gS1RVdGlsLmdldChlbGVtZW50KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuYW1lLCBkYXRhKSB7CiAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZWxlbWVudC5jdXN0b21EYXRhVGFnID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVJRCsrOwogICAgICAgICAgICBlbGVtZW50LmN1c3RvbURhdGFUYWcgPSB3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZUlEOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZVtlbGVtZW50LmN1c3RvbURhdGFUYWddID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVbZWxlbWVudC5jdXN0b21EYXRhVGFnXSA9IHt9OwogICAgICAgICAgfQoKICAgICAgICAgIHdpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlW2VsZW1lbnQuY3VzdG9tRGF0YVRhZ11bbmFtZV0gPSBkYXRhOwogICAgICAgIH0sCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQobmFtZSkgewogICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGVsZW1lbnQuY3VzdG9tRGF0YVRhZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHdpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlW2VsZW1lbnQuY3VzdG9tRGF0YVRhZ11bbmFtZV0gOiBudWxsOwogICAgICAgIH0sCiAgICAgICAgaGFzOiBmdW5jdGlvbiBoYXMobmFtZSkgewogICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGVsZW1lbnQuY3VzdG9tRGF0YVRhZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVbZWxlbWVudC5jdXN0b21EYXRhVGFnXSAmJiB3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZVtlbGVtZW50LmN1c3RvbURhdGFUYWddW25hbWVdID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkgewogICAgICAgICAgaWYgKGVsZW1lbnQgJiYgdGhpcy5oYXMobmFtZSkpIHsKICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlW2VsZW1lbnQuY3VzdG9tRGF0YVRhZ11bbmFtZV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIG91dGVyV2lkdGg6IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWwsIG1hcmdpbikgewogICAgICB2YXIgd2lkdGg7CgogICAgICBpZiAobWFyZ2luID09PSB0cnVlKSB7CiAgICAgICAgd2lkdGggPSBwYXJzZUZsb2F0KGVsLm9mZnNldFdpZHRoKTsKICAgICAgICB3aWR0aCArPSBwYXJzZUZsb2F0KEtUVXRpbC5jc3MoZWwsICdtYXJnaW4tbGVmdCcpKSArIHBhcnNlRmxvYXQoS1RVdGlsLmNzcyhlbCwgJ21hcmdpbi1yaWdodCcpKTsKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh3aWR0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2lkdGggPSBwYXJzZUZsb2F0KGVsLm9mZnNldFdpZHRoKTsKICAgICAgICByZXR1cm4gd2lkdGg7CiAgICAgIH0KICAgIH0sCiAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldChlbGVtKSB7CiAgICAgIHZhciByZWN0LCB3aW47CiAgICAgIGVsZW0gPSBLVFV0aWwuZ2V0KGVsZW0pOwoKICAgICAgaWYgKCFlbGVtKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFJldHVybiB6ZXJvcyBmb3IgZGlzY29ubmVjdGVkIGFuZCBoaWRkZW4gKGRpc3BsYXk6IG5vbmUpIGVsZW1lbnRzIChnaC0yMzEwKQogICAgICAvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHkKICAgICAgLy8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYQogICAgICAvLyBkaXNjb25uZWN0ZWQgbm9kZSBpbiBJRSB0aHJvd3MgYW4gZXJyb3IKCgogICAgICBpZiAoIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9wOiAwLAogICAgICAgICAgbGVmdDogMAogICAgICAgIH07CiAgICAgIH0gLy8gR2V0IGRvY3VtZW50LXJlbGF0aXZlIHBvc2l0aW9uIGJ5IGFkZGluZyB2aWV3cG9ydCBzY3JvbGwgdG8gdmlld3BvcnQtcmVsYXRpdmUgZ0JDUgoKCiAgICAgIHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB3aW4gPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCwKICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQKICAgICAgfTsKICAgIH0sCiAgICBoZWlnaHQ6IGZ1bmN0aW9uIGhlaWdodChlbCkgewogICAgICByZXR1cm4gS1RVdGlsLmNzcyhlbCwgJ2hlaWdodCcpOwogICAgfSwKICAgIHZpc2libGU6IGZ1bmN0aW9uIHZpc2libGUoZWwpIHsKICAgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggPT09IDAgJiYgZWwub2Zmc2V0SGVpZ2h0ID09PSAwKTsKICAgIH0sCiAgICBhdHRyOiBmdW5jdGlvbiBhdHRyKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgICBlbCA9IEtUVXRpbC5nZXQoZWwpOwoKICAgICAgaWYgKGVsID09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBlbC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIH0KICAgIH0sCiAgICBoYXNBdHRyOiBmdW5jdGlvbiBoYXNBdHRyKGVsLCBuYW1lKSB7CiAgICAgIGVsID0gS1RVdGlsLmdldChlbCk7CgogICAgICBpZiAoZWwgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKG5hbWUpID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKICAgIHJlbW92ZUF0dHI6IGZ1bmN0aW9uIHJlbW92ZUF0dHIoZWwsIG5hbWUpIHsKICAgICAgZWwgPSBLVFV0aWwuZ2V0KGVsKTsKCiAgICAgIGlmIChlbCA9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgIH0sCiAgICBhbmltYXRlOiBmdW5jdGlvbiBhbmltYXRlKGZyb20sIHRvLCBkdXJhdGlvbiwgdXBkYXRlLCBlYXNpbmcsIGRvbmUpIHsKICAgICAgLyoqDQogICAgICAgKiBUaW55QW5pbWF0ZS5lYXNpbmdzDQogICAgICAgKiAgQWRhcHRlZCBmcm9tIGpRdWVyeSBFYXNpbmcNCiAgICAgICAqLwogICAgICB2YXIgZWFzaW5ncyA9IHt9OwogICAgICB2YXIgZWFzaW5nOwoKICAgICAgZWFzaW5ncy5saW5lYXIgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkgewogICAgICAgIHJldHVybiBjICogdCAvIGQgKyBiOwogICAgICB9OwoKICAgICAgZWFzaW5nID0gZWFzaW5ncy5saW5lYXI7IC8vIEVhcmx5IGJhaWwgb3V0IGlmIGNhbGxlZCBpbmNvcnJlY3RseQoKICAgICAgaWYgKHR5cGVvZiBmcm9tICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgdG8gIT09ICdudW1iZXInIHx8IHR5cGVvZiBkdXJhdGlvbiAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDcmVhdGUgbW9jayBkb25lKCkgZnVuY3Rpb24gaWYgbmVjZXNzYXJ5CgoKICAgICAgaWYgKHR5cGVvZiBkb25lICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgZG9uZSA9IGZ1bmN0aW9uIGRvbmUoKSB7fTsKICAgICAgfSAvLyBQaWNrIGltcGxlbWVudGF0aW9uIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfCBzZXRUaW1lb3V0KQoKCiAgICAgIHZhciByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNTApOwogICAgICB9OyAvLyBBbmltYXRpb24gbG9vcAoKCiAgICAgIHZhciBjYW5jZWxlZCA9IGZhbHNlOwogICAgICB2YXIgY2hhbmdlID0gdG8gLSBmcm9tOwoKICAgICAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXApIHsKICAgICAgICB2YXIgdGltZSA9ICh0aW1lc3RhbXAgfHwgK25ldyBEYXRlKCkpIC0gc3RhcnQ7CgogICAgICAgIGlmICh0aW1lID49IDApIHsKICAgICAgICAgIHVwZGF0ZShlYXNpbmcodGltZSwgZnJvbSwgY2hhbmdlLCBkdXJhdGlvbikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRpbWUgPj0gMCAmJiB0aW1lID49IGR1cmF0aW9uKSB7CiAgICAgICAgICB1cGRhdGUodG8pOwogICAgICAgICAgZG9uZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByQUYobG9vcCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB1cGRhdGUoZnJvbSk7IC8vIFN0YXJ0IGFuaW1hdGlvbiBsb29wCgogICAgICB2YXIgc3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyA/IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSA6ICtuZXcgRGF0ZSgpOwogICAgICByQUYobG9vcCk7CiAgICB9LAogICAgYWN0dWFsQ3NzOiBmdW5jdGlvbiBhY3R1YWxDc3MoZWwsIHByb3AsIGNhY2hlKSB7CiAgICAgIGVsID0gS1RVdGlsLmdldChlbCk7CiAgICAgIHZhciBjc3MgPSAnJzsKCiAgICAgIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFlbC5nZXRBdHRyaWJ1dGUoJ2t0LWhpZGRlbi0nICsgcHJvcCkgfHwgY2FjaGUgPT09IGZhbHNlKSB7CiAgICAgICAgdmFyIHZhbHVlOyAvLyB0aGUgZWxlbWVudCBpcyBoaWRkZW4gc286CiAgICAgICAgLy8gbWFraW5nIHRoZSBlbCBibG9jayBzbyB3ZSBjYW4gbWVhc3N1cmUgaXRzIGhlaWdodCBidXQgc3RpbGwgYmUgaGlkZGVuCgogICAgICAgIGNzcyA9IGVsLnN0eWxlLmNzc1RleHQ7CiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogYWJzb2x1dGU7IHZpc2liaWxpdHk6IGhpZGRlbjsgZGlzcGxheTogYmxvY2s7JzsKCiAgICAgICAgaWYgKHByb3AgPT0gJ3dpZHRoJykgewogICAgICAgICAgdmFsdWUgPSBlbC5vZmZzZXRXaWR0aDsKICAgICAgICB9IGVsc2UgaWYgKHByb3AgPT0gJ2hlaWdodCcpIHsKICAgICAgICAgIHZhbHVlID0gZWwub2Zmc2V0SGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGNzczsgLy8gc3RvcmUgaXQgaW4gY2FjaGUKCiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdrdC1oaWRkZW4tJyArIHByb3AsIHZhbHVlKTsKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gc3RvcmUgaXQgaW4gY2FjaGUKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChlbC5nZXRBdHRyaWJ1dGUoJ2t0LWhpZGRlbi0nICsgcHJvcCkpOwogICAgICB9CiAgICB9LAogICAgYWN0dWFsSGVpZ2h0OiBmdW5jdGlvbiBhY3R1YWxIZWlnaHQoZWwsIGNhY2hlKSB7CiAgICAgIHJldHVybiBLVFV0aWwuYWN0dWFsQ3NzKGVsLCAnaGVpZ2h0JywgY2FjaGUpOwogICAgfSwKICAgIGFjdHVhbFdpZHRoOiBmdW5jdGlvbiBhY3R1YWxXaWR0aChlbCwgY2FjaGUpIHsKICAgICAgcmV0dXJuIEtUVXRpbC5hY3R1YWxDc3MoZWwsICd3aWR0aCcsIGNhY2hlKTsKICAgIH0sCiAgICBnZXRTY3JvbGw6IGZ1bmN0aW9uIGdldFNjcm9sbChlbGVtZW50LCBtZXRob2QpIHsKICAgICAgLy8gVGhlIHBhc3NlZCBpbiBgbWV0aG9kYCB2YWx1ZSBzaG91bGQgYmUgJ1RvcCcgb3IgJ0xlZnQnCiAgICAgIG1ldGhvZCA9ICdzY3JvbGwnICsgbWV0aG9kOwogICAgICByZXR1cm4gZWxlbWVudCA9PSB3aW5kb3cgfHwgZWxlbWVudCA9PSBkb2N1bWVudCA/IHNlbGZbbWV0aG9kID09ICdzY3JvbGxUb3AnID8gJ3BhZ2VZT2Zmc2V0JyA6ICdwYWdlWE9mZnNldCddIHx8IGJyb3dzZXJTdXBwb3J0c0JveE1vZGVsICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFttZXRob2RdIHx8IGRvY3VtZW50LmJvZHlbbWV0aG9kXSA6IGVsZW1lbnRbbWV0aG9kXTsKICAgIH0sCiAgICBjc3M6IGZ1bmN0aW9uIGNzcyhlbCwgc3R5bGVQcm9wLCB2YWx1ZSkgewogICAgICBlbCA9IEtUVXRpbC5nZXQoZWwpOwoKICAgICAgaWYgKCFlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBlbC5zdHlsZVtzdHlsZVByb3BdID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGRlZmF1bHRWaWV3ID0gKGVsLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpLmRlZmF1bHRWaWV3OyAvLyBXM0Mgc3RhbmRhcmQgd2F5OgoKICAgICAgICBpZiAoZGVmYXVsdFZpZXcgJiYgZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSkgewogICAgICAgICAgLy8gc2FuaXRpemUgcHJvcGVydHkgbmFtZSB0byBjc3Mgbm90YXRpb24KICAgICAgICAgIC8vIChoeXBoZW4gc2VwYXJhdGVkIHdvcmRzIGVnLiBmb250LVNpemUpCiAgICAgICAgICBzdHlsZVByb3AgPSBzdHlsZVByb3AucmVwbGFjZSgvKFtBLVpdKS9nLCAiLSQxIikudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIHJldHVybiBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlUHJvcCk7CiAgICAgICAgfSBlbHNlIGlmIChlbC5jdXJyZW50U3R5bGUpIHsKICAgICAgICAgIC8vIElFCiAgICAgICAgICAvLyBzYW5pdGl6ZSBwcm9wZXJ0eSBuYW1lIHRvIGNhbWVsQ2FzZQogICAgICAgICAgc3R5bGVQcm9wID0gc3R5bGVQcm9wLnJlcGxhY2UoL1wtKFx3KS9nLCBmdW5jdGlvbiAoc3RyLCBsZXR0ZXIpIHsKICAgICAgICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YWx1ZSA9IGVsLmN1cnJlbnRTdHlsZVtzdHlsZVByb3BdOyAvLyBjb252ZXJ0IG90aGVyIHVuaXRzIHRvIHBpeGVscyBvbiBJRQoKICAgICAgICAgIGlmICgvXlxkKyhlbXxwdHwlfGV4KT8kL2kudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgIHZhciBvbGRMZWZ0ID0gZWwuc3R5bGUubGVmdCwKICAgICAgICAgICAgICAgICAgb2xkUnNMZWZ0ID0gZWwucnVudGltZVN0eWxlLmxlZnQ7CiAgICAgICAgICAgICAgZWwucnVudGltZVN0eWxlLmxlZnQgPSBlbC5jdXJyZW50U3R5bGUubGVmdDsKICAgICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gdmFsdWUgfHwgMDsKICAgICAgICAgICAgICB2YWx1ZSA9IGVsLnN0eWxlLnBpeGVsTGVmdCArICJweCI7CiAgICAgICAgICAgICAgZWwuc3R5bGUubGVmdCA9IG9sZExlZnQ7CiAgICAgICAgICAgICAgZWwucnVudGltZVN0eWxlLmxlZnQgPSBvbGRSc0xlZnQ7CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICB9KHZhbHVlKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2xpZGU6IGZ1bmN0aW9uIHNsaWRlKGVsLCBkaXIsIHNwZWVkLCBjYWxsYmFjaywgcmVjYWxjTWF4SGVpZ2h0KSB7CiAgICAgIGlmICghZWwgfHwgZGlyID09ICd1cCcgJiYgS1RVdGlsLnZpc2libGUoZWwpID09PSBmYWxzZSB8fCBkaXIgPT0gJ2Rvd24nICYmIEtUVXRpbC52aXNpYmxlKGVsKSA9PT0gdHJ1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3BlZWQgPSBzcGVlZCA/IHNwZWVkIDogNjAwOwogICAgICB2YXIgY2FsY0hlaWdodCA9IEtUVXRpbC5hY3R1YWxIZWlnaHQoZWwpOwogICAgICB2YXIgY2FsY1BhZGRpbmdUb3AgPSBmYWxzZTsKICAgICAgdmFyIGNhbGNQYWRkaW5nQm90dG9tID0gZmFsc2U7CgogICAgICBpZiAoS1RVdGlsLmNzcyhlbCwgJ3BhZGRpbmctdG9wJykgJiYgS1RVdGlsLmRhdGEoZWwpLmhhcygnc2xpZGUtcGFkZGluZy10b3AnKSAhPT0gdHJ1ZSkgewogICAgICAgIEtUVXRpbC5kYXRhKGVsKS5zZXQoJ3NsaWRlLXBhZGRpbmctdG9wJywgS1RVdGlsLmNzcyhlbCwgJ3BhZGRpbmctdG9wJykpOwogICAgICB9CgogICAgICBpZiAoS1RVdGlsLmNzcyhlbCwgJ3BhZGRpbmctYm90dG9tJykgJiYgS1RVdGlsLmRhdGEoZWwpLmhhcygnc2xpZGUtcGFkZGluZy1ib3R0b20nKSAhPT0gdHJ1ZSkgewogICAgICAgIEtUVXRpbC5kYXRhKGVsKS5zZXQoJ3NsaWRlLXBhZGRpbmctYm90dG9tJywgS1RVdGlsLmNzcyhlbCwgJ3BhZGRpbmctYm90dG9tJykpOwogICAgICB9CgogICAgICBpZiAoS1RVdGlsLmRhdGEoZWwpLmhhcygnc2xpZGUtcGFkZGluZy10b3AnKSkgewogICAgICAgIGNhbGNQYWRkaW5nVG9wID0gcGFyc2VJbnQoS1RVdGlsLmRhdGEoZWwpLmdldCgnc2xpZGUtcGFkZGluZy10b3AnKSk7CiAgICAgIH0KCiAgICAgIGlmIChLVFV0aWwuZGF0YShlbCkuaGFzKCdzbGlkZS1wYWRkaW5nLWJvdHRvbScpKSB7CiAgICAgICAgY2FsY1BhZGRpbmdCb3R0b20gPSBwYXJzZUludChLVFV0aWwuZGF0YShlbCkuZ2V0KCdzbGlkZS1wYWRkaW5nLWJvdHRvbScpKTsKICAgICAgfQoKICAgICAgaWYgKGRpciA9PSAndXAnKSB7CiAgICAgICAgLy8gdXAKICAgICAgICBlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyc7CgogICAgICAgIGlmIChjYWxjUGFkZGluZ1RvcCkgewogICAgICAgICAgS1RVdGlsLmFuaW1hdGUoMCwgY2FsY1BhZGRpbmdUb3AsIHNwZWVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1RvcCA9IGNhbGNQYWRkaW5nVG9wIC0gdmFsdWUgKyAncHgnOwogICAgICAgICAgfSwgJ2xpbmVhcicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbGNQYWRkaW5nQm90dG9tKSB7CiAgICAgICAgICBLVFV0aWwuYW5pbWF0ZSgwLCBjYWxjUGFkZGluZ0JvdHRvbSwgc3BlZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nQm90dG9tID0gY2FsY1BhZGRpbmdCb3R0b20gLSB2YWx1ZSArICdweCc7CiAgICAgICAgICB9LCAnbGluZWFyJyk7CiAgICAgICAgfQoKICAgICAgICBLVFV0aWwuYW5pbWF0ZSgwLCBjYWxjSGVpZ2h0LCBzcGVlZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBjYWxjSGVpZ2h0IC0gdmFsdWUgKyAncHgnOwogICAgICAgIH0sICdsaW5lYXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGRpciA9PSAnZG93bicpIHsKICAgICAgICAvLyBkb3duCiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsnOwoKICAgICAgICBpZiAoY2FsY1BhZGRpbmdUb3ApIHsKICAgICAgICAgIEtUVXRpbC5hbmltYXRlKDAsIGNhbGNQYWRkaW5nVG9wLCBzcGVlZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmdUb3AgPSB2YWx1ZSArICdweCc7CiAgICAgICAgICB9LCAnbGluZWFyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nVG9wID0gJyc7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChjYWxjUGFkZGluZ0JvdHRvbSkgewogICAgICAgICAgS1RVdGlsLmFuaW1hdGUoMCwgY2FsY1BhZGRpbmdCb3R0b20sIHNwZWVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ0JvdHRvbSA9IHZhbHVlICsgJ3B4JzsKICAgICAgICAgIH0sICdsaW5lYXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAnJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgS1RVdGlsLmFuaW1hdGUoMCwgY2FsY0hlaWdodCwgc3BlZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gdmFsdWUgKyAncHgnOwogICAgICAgIH0sICdsaW5lYXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICBlbC5zdHlsZS5vdmVyZmxvdyA9ICcnOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2xpZGVVcDogZnVuY3Rpb24gc2xpZGVVcChlbCwgc3BlZWQsIGNhbGxiYWNrKSB7CiAgICAgIEtUVXRpbC5zbGlkZShlbCwgJ3VwJywgc3BlZWQsIGNhbGxiYWNrKTsKICAgIH0sCiAgICBzbGlkZURvd246IGZ1bmN0aW9uIHNsaWRlRG93bihlbCwgc3BlZWQsIGNhbGxiYWNrKSB7CiAgICAgIEtUVXRpbC5zbGlkZShlbCwgJ2Rvd24nLCBzcGVlZCwgY2FsbGJhY2spOwogICAgfSwKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coZWwsIGRpc3BsYXkpIHsKICAgICAgaWYgKHR5cGVvZiBlbCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheSA/IGRpc3BsYXkgOiAnYmxvY2snOwogICAgICB9CiAgICB9LAogICAgaGlkZTogZnVuY3Rpb24gaGlkZShlbCkgewogICAgICBpZiAodHlwZW9mIGVsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIH0KICAgIH0sCiAgICBhZGRFdmVudDogZnVuY3Rpb24gYWRkRXZlbnQoZWwsIHR5cGUsIGhhbmRsZXIsIG9uZSkgewogICAgICBlbCA9IEtUVXRpbC5nZXQoZWwpOwoKICAgICAgaWYgKHR5cGVvZiBlbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZWwgIT09IG51bGwpIHsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlRXZlbnQ6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50KGVsLCB0eXBlLCBoYW5kbGVyKSB7CiAgICAgIGVsID0gS1RVdGlsLmdldChlbCk7CgogICAgICBpZiAoZWwgIT09IG51bGwpIHsKICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpOwogICAgICB9CiAgICB9LAogICAgb246IGZ1bmN0aW9uIG9uKGVsZW1lbnQsIHNlbGVjdG9yLCBldmVudCwgaGFuZGxlcikgewogICAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZXZlbnRJZCA9IEtUVXRpbC5nZXRVbmlxdWVJRCgnZXZlbnQnKTsKCiAgICAgIHdpbmRvdy5LVFV0aWxEZWxlZ2F0ZWRFdmVudEhhbmRsZXJzW2V2ZW50SWRdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdGFyZ2V0cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwoKICAgICAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZWxlbWVudCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSB0YXJnZXRzLmxlbmd0aDsgaSA8IGo7IGkrKykgewogICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB0YXJnZXRzW2ldKSB7CiAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKHRhcmdldCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBLVFV0aWwuYWRkRXZlbnQoZWxlbWVudCwgZXZlbnQsIHdpbmRvdy5LVFV0aWxEZWxlZ2F0ZWRFdmVudEhhbmRsZXJzW2V2ZW50SWRdKTsKICAgICAgcmV0dXJuIGV2ZW50SWQ7CiAgICB9LAogICAgb2ZmOiBmdW5jdGlvbiBvZmYoZWxlbWVudCwgZXZlbnQsIGV2ZW50SWQpIHsKICAgICAgaWYgKCFlbGVtZW50IHx8ICF3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgS1RVdGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsIGV2ZW50LCB3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXSk7CiAgICAgIGRlbGV0ZSB3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXTsKICAgIH0sCiAgICBvbmU6IGZ1bmN0aW9uIG9uZXRpbWUoZWwsIHR5cGUsIGNhbGxiYWNrKSB7CiAgICAgIGVsID0gS1RVdGlsLmdldChlbCk7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gY2FsbGVlKGUpIHsKICAgICAgICAvLyByZW1vdmUgZXZlbnQKICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgZS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLnR5cGUsIGNhbGxlZSk7CiAgICAgICAgfSAvLyBjYWxsIGhhbmRsZXIKCgogICAgICAgIHJldHVybiBjYWxsYmFjayhlKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFzaDogZnVuY3Rpb24gaGFzaChzdHIpIHsKICAgICAgdmFyIGhhc2ggPSAwLAogICAgICAgICAgaSwKICAgICAgICAgIGNocjsKICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHJldHVybiBoYXNoOwoKICAgICAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICAgIGNociA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaHI7CiAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXIKICAgICAgfQoKICAgICAgcmV0dXJuIGhhc2g7CiAgICB9LAogICAgYW5pbWF0ZUNsYXNzOiBmdW5jdGlvbiBhbmltYXRlQ2xhc3MoZWwsIGFuaW1hdGlvbk5hbWUsIGNhbGxiYWNrKSB7CiAgICAgIHZhciBhbmltYXRpb247CiAgICAgIHZhciBhbmltYXRpb25zID0gewogICAgICAgIGFuaW1hdGlvbjogJ2FuaW1hdGlvbmVuZCcsCiAgICAgICAgT0FuaW1hdGlvbjogJ29BbmltYXRpb25FbmQnLAogICAgICAgIE1vekFuaW1hdGlvbjogJ21vekFuaW1hdGlvbkVuZCcsCiAgICAgICAgV2Via2l0QW5pbWF0aW9uOiAnd2Via2l0QW5pbWF0aW9uRW5kJywKICAgICAgICBtc0FuaW1hdGlvbjogJ21zQW5pbWF0aW9uRW5kJwogICAgICB9OwoKICAgICAgZm9yICh2YXIgdCBpbiBhbmltYXRpb25zKSB7CiAgICAgICAgaWYgKGVsLnN0eWxlW3RdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbdF07CiAgICAgICAgfQogICAgICB9CgogICAgICBLVFV0aWwuYWRkQ2xhc3MoZWwsICdhbmltYXRlZCAnICsgYW5pbWF0aW9uTmFtZSk7CiAgICAgIEtUVXRpbC5vbmUoZWwsIGFuaW1hdGlvbiwgZnVuY3Rpb24gKCkgewogICAgICAgIEtUVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2FuaW1hdGVkICcgKyBhbmltYXRpb25OYW1lKTsKICAgICAgfSk7CgogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBLVFV0aWwub25lKGVsLCBhbmltYXRpb24sIGNhbGxiYWNrKTsKICAgICAgfQogICAgfSwKICAgIHRyYW5zaXRpb25FbmQ6IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoZWwsIGNhbGxiYWNrKSB7CiAgICAgIHZhciB0cmFuc2l0aW9uOwogICAgICB2YXIgdHJhbnNpdGlvbnMgPSB7CiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLAogICAgICAgIE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQnLAogICAgICAgIE1velRyYW5zaXRpb246ICdtb3pUcmFuc2l0aW9uRW5kJywKICAgICAgICBXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsCiAgICAgICAgbXNUcmFuc2l0aW9uOiAnbXNUcmFuc2l0aW9uRW5kJwogICAgICB9OwoKICAgICAgZm9yICh2YXIgdCBpbiB0cmFuc2l0aW9ucykgewogICAgICAgIGlmIChlbC5zdHlsZVt0XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbnNbdF07CiAgICAgICAgfQogICAgICB9CgogICAgICBLVFV0aWwub25lKGVsLCB0cmFuc2l0aW9uLCBjYWxsYmFjayk7CiAgICB9LAogICAgYW5pbWF0aW9uRW5kOiBmdW5jdGlvbiBhbmltYXRpb25FbmQoZWwsIGNhbGxiYWNrKSB7CiAgICAgIHZhciBhbmltYXRpb247CiAgICAgIHZhciBhbmltYXRpb25zID0gewogICAgICAgIGFuaW1hdGlvbjogJ2FuaW1hdGlvbmVuZCcsCiAgICAgICAgT0FuaW1hdGlvbjogJ29BbmltYXRpb25FbmQnLAogICAgICAgIE1vekFuaW1hdGlvbjogJ21vekFuaW1hdGlvbkVuZCcsCiAgICAgICAgV2Via2l0QW5pbWF0aW9uOiAnd2Via2l0QW5pbWF0aW9uRW5kJywKICAgICAgICBtc0FuaW1hdGlvbjogJ21zQW5pbWF0aW9uRW5kJwogICAgICB9OwoKICAgICAgZm9yICh2YXIgdCBpbiBhbmltYXRpb25zKSB7CiAgICAgICAgaWYgKGVsLnN0eWxlW3RdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbdF07CiAgICAgICAgfQogICAgICB9CgogICAgICBLVFV0aWwub25lKGVsLCBhbmltYXRpb24sIGNhbGxiYWNrKTsKICAgIH0sCiAgICBhbmltYXRlRGVsYXk6IGZ1bmN0aW9uIGFuaW1hdGVEZWxheShlbCwgdmFsdWUpIHsKICAgICAgdmFyIHZlbmRvcnMgPSBbJ3dlYmtpdC0nLCAnbW96LScsICdtcy0nLCAnby0nLCAnJ107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlbmRvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBLVFV0aWwuY3NzKGVsLCB2ZW5kb3JzW2ldICsgJ2FuaW1hdGlvbi1kZWxheScsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGFuaW1hdGVEdXJhdGlvbjogZnVuY3Rpb24gYW5pbWF0ZUR1cmF0aW9uKGVsLCB2YWx1ZSkgewogICAgICB2YXIgdmVuZG9ycyA9IFsnd2Via2l0LScsICdtb3otJywgJ21zLScsICdvLScsICcnXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGg7IGkrKykgewogICAgICAgIEtUVXRpbC5jc3MoZWwsIHZlbmRvcnNbaV0gKyAnYW5pbWF0aW9uLWR1cmF0aW9uJywgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgc2Nyb2xsVG86IGZ1bmN0aW9uIHNjcm9sbFRvKHRhcmdldCwgb2Zmc2V0LCBkdXJhdGlvbikgewogICAgICB2YXIgZHVyYXRpb24gPSBkdXJhdGlvbiA/IGR1cmF0aW9uIDogNTAwOwogICAgICB2YXIgdGFyZ2V0ID0gS1RVdGlsLmdldCh0YXJnZXQpOwogICAgICB2YXIgdGFyZ2V0UG9zID0gdGFyZ2V0ID8gS1RVdGlsLm9mZnNldCh0YXJnZXQpLnRvcCA6IDA7CiAgICAgIHZhciBzY3JvbGxQb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwOwogICAgICB2YXIgZnJvbSwgdG87CgogICAgICBpZiAob2Zmc2V0KSB7CiAgICAgICAgc2Nyb2xsUG9zICs9IG9mZnNldDsKICAgICAgfQoKICAgICAgZnJvbSA9IHNjcm9sbFBvczsKICAgICAgdG8gPSB0YXJnZXRQb3M7CiAgICAgIEtUVXRpbC5hbmltYXRlKGZyb20sIHRvLCBkdXJhdGlvbiwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IHZhbHVlOwogICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxUb3AgPSB2YWx1ZTsKICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IHZhbHVlOwogICAgICB9KTsgLy8sIGVhc2luZywgZG9uZQogICAgfSwKICAgIHNjcm9sbFRvcDogZnVuY3Rpb24gc2Nyb2xsVG9wKG9mZnNldCwgZHVyYXRpb24pIHsKICAgICAgS1RVdGlsLnNjcm9sbFRvKG51bGwsIG9mZnNldCwgZHVyYXRpb24pOwogICAgfSwKICAgIGlzQXJyYXk6IGZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgQXJyYXkuaXNBcnJheShvYmopOwogICAgfSwKICAgIHJlYWR5OiBmdW5jdGlvbiByZWFkeShjYWxsYmFjaykgewogICAgICBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQgPyBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiIDogZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gImxvYWRpbmciKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2FsbGJhY2spOwogICAgICB9CiAgICB9LAogICAgaXNFbXB0eTogZnVuY3Rpb24gaXNFbXB0eShvYmopIHsKICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsKICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBudW1iZXJTdHJpbmc6IGZ1bmN0aW9uIG51bWJlclN0cmluZyhuU3RyKSB7CiAgICAgIG5TdHIgKz0gJyc7CiAgICAgIHZhciB4ID0gblN0ci5zcGxpdCgnLicpOwogICAgICB2YXIgeDEgPSB4WzBdOwogICAgICB2YXIgeDIgPSB4Lmxlbmd0aCA+IDEgPyAnLicgKyB4WzFdIDogJyc7CiAgICAgIHZhciByZ3ggPSAvKFxkKykoXGR7M30pLzsKCiAgICAgIHdoaWxlIChyZ3gudGVzdCh4MSkpIHsKICAgICAgICB4MSA9IHgxLnJlcGxhY2Uocmd4LCAnJDEnICsgJywnICsgJyQyJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB4MSArIHgyOwogICAgfSwKICAgIGRldGVjdElFOiBmdW5jdGlvbiBkZXRlY3RJRSgpIHsKICAgICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7IC8vIFRlc3QgdmFsdWVzOyBVbmNvbW1lbnQgdG8gY2hlY2sgcmVzdWx0IOKApgogICAgICAvLyBJRSAxMAogICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJzsKICAgICAgLy8gSUUgMTEKICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7CiAgICAgIC8vIEVkZ2UgMTIgKFNwYXJ0YW4pCiAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJzsKICAgICAgLy8gRWRnZSAxMwogICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNDYuMC4yNDg2LjAgU2FmYXJpLzUzNy4zNiBFZGdlLzEzLjEwNTg2JzsKCiAgICAgIHZhciBtc2llID0gdWEuaW5kZXhPZignTVNJRSAnKTsKCiAgICAgIGlmIChtc2llID4gMCkgewogICAgICAgIC8vIElFIDEwIG9yIG9sZGVyID0+IHJldHVybiB2ZXJzaW9uIG51bWJlcgogICAgICAgIHJldHVybiBwYXJzZUludCh1YS5zdWJzdHJpbmcobXNpZSArIDUsIHVhLmluZGV4T2YoJy4nLCBtc2llKSksIDEwKTsKICAgICAgfQoKICAgICAgdmFyIHRyaWRlbnQgPSB1YS5pbmRleE9mKCdUcmlkZW50LycpOwoKICAgICAgaWYgKHRyaWRlbnQgPiAwKSB7CiAgICAgICAgLy8gSUUgMTEgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyCiAgICAgICAgdmFyIHJ2ID0gdWEuaW5kZXhPZigncnY6Jyk7CiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHVhLnN1YnN0cmluZyhydiArIDMsIHVhLmluZGV4T2YoJy4nLCBydikpLCAxMCk7CiAgICAgIH0KCiAgICAgIHZhciBlZGdlID0gdWEuaW5kZXhPZignRWRnZS8nKTsKCiAgICAgIGlmIChlZGdlID4gMCkgewogICAgICAgIC8vIEVkZ2UgKElFIDEyKykgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyCiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHVhLnN1YnN0cmluZyhlZGdlICsgNSwgdWEuaW5kZXhPZignLicsIGVkZ2UpKSwgMTApOwogICAgICB9IC8vIG90aGVyIGJyb3dzZXIKCgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgaXNSVEw6IGZ1bmN0aW9uIGlzUlRMKCkgewogICAgICByZXR1cm4gS1RVdGlsLmF0dHIoS1RVdGlsLmdldCgnaHRtbCcpLCAnZGlyZWN0aW9uJykgPT0gJ3J0bCc7CiAgICB9LAogICAgLy8KICAgIC8vIFNjcm9sbGVyCiAgICBzY3JvbGxJbml0OiBmdW5jdGlvbiBzY3JvbGxJbml0KGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47IC8vIERlZmluZSBpbml0IGZ1bmN0aW9uCgogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIHZhciBwczsKICAgICAgICB2YXIgaGVpZ2h0OwoKICAgICAgICBpZiAob3B0aW9ucy5oZWlnaHQgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgaGVpZ2h0ID0gcGFyc2VJbnQob3B0aW9ucy5oZWlnaHQuY2FsbCgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGVpZ2h0ID0gcGFyc2VJbnQob3B0aW9ucy5oZWlnaHQpOwogICAgICAgIH0gLy8gRGVzdHJveSBzY3JvbGwgb24gdGFibGUgYW5kIG1vYmlsZSBtb2RlcwoKCiAgICAgICAgaWYgKChvcHRpb25zLm1vYmlsZU5hdGl2ZVNjcm9sbCB8fCBvcHRpb25zLmRpc2FibGVGb3JNb2JpbGUpICYmIEtUVXRpbC5pc0luUmVzcG9uc2l2ZVJhbmdlKCd0YWJsZXQtYW5kLW1vYmlsZScpKSB7CiAgICAgICAgICBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLmdldCgncHMnKTsKCiAgICAgICAgICBpZiAocHMpIHsKICAgICAgICAgICAgaWYgKG9wdGlvbnMucmVzZXRIZWlnaHRPbkRlc3Ryb3kpIHsKICAgICAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdoZWlnaHQnLCAnYXV0bycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIEtUVXRpbC5jc3MoZWxlbWVudCwgJ292ZXJmbG93JywgJ2F1dG8nKTsKCiAgICAgICAgICAgICAgaWYgKGhlaWdodCA+IDApIHsKICAgICAgICAgICAgICAgIEtUVXRpbC5jc3MoZWxlbWVudCwgJ2hlaWdodCcsIGhlaWdodCArICdweCcpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHMuZGVzdHJveSgpOwogICAgICAgICAgICBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLnJlbW92ZSgncHMnKTsKICAgICAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0ID4gMCkgewogICAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdvdmVyZmxvdycsICdhdXRvJyk7CiAgICAgICAgICAgIEtUVXRpbC5jc3MoZWxlbWVudCwgJ2hlaWdodCcsIGhlaWdodCArICdweCcpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChoZWlnaHQgPiAwKSB7CiAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdoZWlnaHQnLCBoZWlnaHQgKyAncHgnKTsKICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmRlc2t0b3BOYXRpdmVTY3JvbGwpIHsKICAgICAgICAgIEtUVXRpbC5jc3MoZWxlbWVudCwgJ292ZXJmbG93JywgJ2F1dG8nKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIEluaXQgc2Nyb2xsCgoKICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdvdmVyZmxvdycsICdoaWRkZW4nKTsKICAgICAgICBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLmdldCgncHMnKTsKCiAgICAgICAgaWYgKHBzKSB7CiAgICAgICAgICBwcy51cGRhdGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgS1RVdGlsLmFkZENsYXNzKGVsZW1lbnQsICdrdC1zY3JvbGwnKTsKICAgICAgICAgIHBzID0gbmV3IFBlcmZlY3RTY3JvbGxiYXIoZWxlbWVudCwgewogICAgICAgICAgICB3aGVlbFNwZWVkOiAwLjUsCiAgICAgICAgICAgIHN3aXBlRWFzaW5nOiB0cnVlLAogICAgICAgICAgICB3aGVlbFByb3BhZ2F0aW9uOiBvcHRpb25zLndpbmRvd1Njcm9sbCA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsCiAgICAgICAgICAgIG1pblNjcm9sbGJhckxlbmd0aDogNDAsCiAgICAgICAgICAgIG1heFNjcm9sbGJhckxlbmd0aDogMzAwLAogICAgICAgICAgICBzdXBwcmVzc1Njcm9sbFg6IEtUVXRpbC5hdHRyKGVsZW1lbnQsICdkYXRhLXNjcm9sbC14JykgIT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICAgIEtUVXRpbC5kYXRhKGVsZW1lbnQpLnNldCgncHMnLCBwcyk7CiAgICAgICAgfSAvLyBSZW1lbWJlciBzY3JvbGwgcG9zaXRpb24gaW4gY29va2llCgoKICAgICAgICB2YXIgdWlkID0gS1RVdGlsLmF0dHIoZWxlbWVudCwgJ2lkJyk7CgogICAgICAgIGlmIChvcHRpb25zLnJlbWVtYmVyUG9zaXRpb24gPT09IHRydWUgJiYgQ29va2llcyAmJiB1aWQpIHsKICAgICAgICAgIGlmIChDb29raWVzLmdldCh1aWQpKSB7CiAgICAgICAgICAgIHZhciBwb3MgPSBwYXJzZUludChDb29raWVzLmdldCh1aWQpKTsKCiAgICAgICAgICAgIGlmIChwb3MgPiAwKSB7CiAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBwb3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BzLXNjcm9sbC15JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDb29raWVzLnNldCh1aWQsIGVsZW1lbnQuc2Nyb2xsVG9wKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSAvLyBJbml0CgoKICAgICAgaW5pdCgpOyAvLyBIYW5kbGUgd2luZG93IHJlc2l6ZQoKICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlV2luZG93UmVzaXplKSB7CiAgICAgICAgS1RVdGlsLmFkZFJlc2l6ZUhhbmRsZXIoZnVuY3Rpb24gKCkgewogICAgICAgICAgaW5pdCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2Nyb2xsVXBkYXRlOiBmdW5jdGlvbiBzY3JvbGxVcGRhdGUoZWxlbWVudCkgewogICAgICB2YXIgcHMgPSBLVFV0aWwuZGF0YShlbGVtZW50KS5nZXQoJ3BzJyk7CgogICAgICBpZiAocHMpIHsKICAgICAgICBwcy51cGRhdGUoKTsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbFVwZGF0ZUFsbDogZnVuY3Rpb24gc2Nyb2xsVXBkYXRlQWxsKHBhcmVudCkgewogICAgICB2YXIgc2Nyb2xsZXJzID0gS1RVdGlsLmZpbmRBbGwocGFyZW50LCAnLnBzJyk7CgogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2Nyb2xsZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgS1RVdGlsLnNjcm9sbFVwZGF0ZShzY3JvbGxlcnNbaV0pOwogICAgICB9CiAgICB9LAogICAgc2Nyb2xsRGVzdHJveTogZnVuY3Rpb24gc2Nyb2xsRGVzdHJveShlbGVtZW50KSB7CiAgICAgIHZhciBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLmdldCgncHMnKTsKCiAgICAgIGlmIChwcykgewogICAgICAgIHBzLmRlc3Ryb3koKTsKICAgICAgICBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLnJlbW92ZSgncHMnKTsKICAgICAgfQogICAgfSwKICAgIHNldEhUTUw6IGZ1bmN0aW9uIHNldEhUTUwoZWwsIGh0bWwpIHsKICAgICAgaWYgKEtUVXRpbC5nZXQoZWwpKSB7CiAgICAgICAgS1RVdGlsLmdldChlbCkuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgfQogICAgfSwKICAgIGdldEhUTUw6IGZ1bmN0aW9uIGdldEhUTUwoZWwpIHsKICAgICAgaWYgKEtUVXRpbC5nZXQoZWwpKSB7CiAgICAgICAgcmV0dXJuIEtUVXRpbC5nZXQoZWwpLmlubmVySFRNTDsKICAgICAgfQogICAgfSwKICAgIGdldERvY3VtZW50SGVpZ2h0OiBmdW5jdGlvbiBnZXREb2N1bWVudEhlaWdodCgpIHsKICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5OwogICAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgcmV0dXJuIE1hdGgubWF4KGJvZHkuc2Nyb2xsSGVpZ2h0LCBib2R5Lm9mZnNldEhlaWdodCwgaHRtbC5jbGllbnRIZWlnaHQsIGh0bWwuc2Nyb2xsSGVpZ2h0LCBodG1sLm9mZnNldEhlaWdodCk7CiAgICB9LAogICAgZ2V0U2Nyb2xsVG9wOiBmdW5jdGlvbiBnZXRTY3JvbGxUb3AoKSB7CiAgICAgIHJldHVybiAoZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnNjcm9sbFRvcDsKICAgIH0KICB9Owp9KCk7IC8vIHdlYnBhY2sgc3VwcG9ydAoKCmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSBLVFV0aWw7Cn0gLy8gSW5pdGlhbGl6ZSBLVFV0aWwgY2xhc3Mgb24gZG9jdW1lbnQgcmVhZHkKCgpLVFV0aWwucmVhZHkoZnVuY3Rpb24gKCkgewogIEtUVXRpbC5pbml0KCk7Cn0pOyAvLyBDU1MzIFRyYW5zaXRpb25zIG9ubHkgYWZ0ZXIgcGFnZSBsb2FkKC5rdC1wYWdlLWxvYWRpbmcgY2xhc3MgYWRkZWQgdG8gYm9keSB0YWcgYW5kIHJlbW92ZSB3aXRoIEpTIG9uIHBhZ2UgbG9hZCkKCndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgS1RVdGlsLnJlbW92ZUNsYXNzKEtUVXRpbC5nZXQoJ2JvZHknKSwgJ2t0LXBhZ2UtLWxvYWRpbmcnKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEtUVXRpbDs="},{"version":3,"sources":["/Users/davislin/DavisLin/Case/erp/src/assets/js/util.js"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","ancestor","document","documentElement","contains","parentElement","elem","i","length","window","remove","parentNode","removeChild","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","arr","forEach","item","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","prepend","argArr","Array","slice","call","arguments","docFrag","createDocumentFragment","argItem","isNode","Node","appendChild","createTextNode","String","insertBefore","firstChild","Document","DocumentFragment","KTUtilElementDataStore","KTUtilElementDataStoreID","KTUtilDelegatedEventHandlers","KTUtil","resizeHandlers","breakpoints","sm","md","lg","xl","_windowResizeHandler","_runResizeHandlers","each","timeout","delay","addEventListener","init","options","addResizeHandler","push","removeResizeHandler","runResizeHandlers","resize","Event","dispatchEvent","evt","createEvent","initUIEvent","getURLParam","paramName","searchString","location","search","substring","val","params","split","unescape","isMobileDevice","getViewPort","width","getBreakpoint","isDesktopDevice","e","a","body","height","isInResponsiveRange","mode","breakpoint","getUniqueID","prefix","floor","random","isset","obj","keys","stone","indexOf","Error","undefined","shift","getHighestZindex","get","position","css","parseInt","isNaN","hasFixedPositionedParent","sleep","milliseconds","start","getRandomInt","min","isAngularVersion","Zone","deepExtend","out","key","extend","query","nodeType","getElementById","getElementsByTagName","getElementsByClassName","getByID","getByTag","getByClass","hasClasses","classes","classesArr","hasClass","trim","className","classList","RegExp","test","addClass","classNames","add","removeClass","replace","triggerCustomEvent","eventName","data","event","CustomEvent","detail","initCustomEvent","triggerEvent","node","doc","ownerDocument","eventClass","bubbles","initEvent","synthetic","fireEvent","createEventObject","index","elm","c","children","string","eventTriggered","currentTarget","dataset","triggered","find","parent","querySelector","findAll","querySelectorAll","insertAfter","referenceNode","nextSibling","parents","selector","matchesSelector","mozMatchesSelector","oMatchesSelector","log","childNodes","result","l","child","p","f","tagName","element","set","name","customDataTag","has","outerWidth","margin","parseFloat","offsetWidth","offset","rect","win","getClientRects","top","left","getBoundingClientRect","defaultView","pageYOffset","pageXOffset","visible","offsetHeight","attr","setAttribute","getAttribute","hasAttr","removeAttr","removeAttribute","animate","from","to","duration","update","easing","done","easings","linear","t","b","d","rAF","canceled","change","loop","timestamp","time","performance","now","actualCss","prop","cache","HTMLElement","style","cssText","actualHeight","actualWidth","getScroll","method","self","browserSupportsBoxModel","styleProp","getComputedStyle","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","slide","dir","speed","recalcMaxHeight","calcHeight","calcPaddingTop","calcPaddingBottom","paddingTop","paddingBottom","display","overflow","slideUp","slideDown","show","hide","addEvent","type","handler","one","removeEvent","removeEventListener","on","eventId","targets","target","j","off","onetime","callee","hash","chr","charCodeAt","animateClass","animationName","animation","animations","OAnimation","MozAnimation","WebkitAnimation","msAnimation","transitionEnd","transition","transitions","OTransition","MozTransition","WebkitTransition","msTransition","animationEnd","animateDelay","animateDuration","scrollTo","targetPos","scrollPos","scrollTop","isArray","ready","attachEvent","readyState","isEmpty","numberString","nStr","x1","x2","rgx","detectIE","ua","navigator","userAgent","msie","trident","rv","edge","isRTL","scrollInit","ps","Function","mobileNativeScroll","disableForMobile","resetHeightOnDestroy","destroy","desktopNativeScroll","PerfectScrollbar","wheelSpeed","swipeEasing","wheelPropagation","windowScroll","minScrollbarLength","maxScrollbarLength","suppressScrollX","uid","rememberPosition","Cookies","pos","handleWindowResize","scrollUpdate","scrollUpdateAll","scrollers","len","scrollDestroy","setHTML","html","innerHTML","getHTML","getDocumentHeight","scrollHeight","clientHeight","getScrollTop","scrollingElement","module","exports","onload"],"mappings":"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","sourcesContent":["/* eslint-disable no-script-url,jsx-a11y/anchor-is-valid,no-loop-func,no-undef,no-restricted-globals,strict,no-unused-vars,no-cond-assign,eqeqeq,no-throw-literal,no-unreachable,no-useless-escape,no-redeclare,no-useless-concat,no-unused-expressions,no-sequences */\r\n\"use strict\";\r\n/**\r\n * @class KTUtil  base utilize class that privides helper functions\r\n */\r\n\r\n// Polyfills\r\n/**\r\n * Element.matches() polyfill (simple version)\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\r\n */\r\nif (!Element.prototype.matches) {\r\n\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n}\r\n\r\n/**\r\n * Element.closest() polyfill\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\r\n */\r\nif (!Element.prototype.closest) {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n\t}\r\n\tElement.prototype.closest = function (s) {\r\n\t\tvar el = this;\r\n\t\tvar ancestor = this;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tif (ancestor.matches(s)) return ancestor;\r\n\t\t\tancestor = ancestor.parentElement;\r\n\t\t} while (ancestor !== null);\r\n\t\treturn null;\r\n\t};\r\n}\r\n\r\n/**\r\n * ChildNode.remove() polyfill\r\n * https://gomakethings.com/removing-an-element-from-the-dom-the-es6-way/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\n(function (elem) {\r\n\tfor (var i = 0; i < elem.length; i++) {\r\n\t\tif (!window[elem[i]] || 'remove' in window[elem[i]].prototype) continue;\r\n\t\twindow[elem[i]].prototype.remove = function () {\r\n\t\t\tthis.parentNode.removeChild(this);\r\n\t\t};\r\n\t}\r\n})(['Element', 'CharacterData', 'DocumentType']);\r\n\r\n//\r\n// requestAnimationFrame polyfill by Erik Mller.\r\n//  With fixes from Paul Irish and Tino Zijdel\r\n//\r\n//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n//\r\n//  MIT license\r\n//\r\n(function() {\r\n    var lastTime = 0;\r\n    var vendors = ['webkit', 'moz'];\r\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame =\r\n            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n\r\n    if (!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function(callback) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = window.setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n\r\n    if (!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/prepend()/prepend().md\r\n(function(arr) {\r\n    arr.forEach(function(item) {\r\n        if (item.hasOwnProperty('prepend')) {\r\n            return;\r\n        }\r\n        Object.defineProperty(item, 'prepend', {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: function prepend() {\r\n                var argArr = Array.prototype.slice.call(arguments),\r\n                    docFrag = document.createDocumentFragment();\r\n\r\n                argArr.forEach(function(argItem) {\r\n                    var isNode = argItem instanceof Node;\r\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\r\n                });\r\n\r\n                this.insertBefore(docFrag, this.firstChild);\r\n            }\r\n        });\r\n    });\r\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\r\n\r\n// Global variables\r\nwindow.KTUtilElementDataStore = {};\r\nwindow.KTUtilElementDataStoreID = 0;\r\nwindow.KTUtilDelegatedEventHandlers = {};\r\n\r\nvar KTUtil = function() {\r\n    var resizeHandlers = [];\r\n\r\n    /** @type {object} breakpoints The device width breakpoints **/\r\n    var breakpoints = {\r\n        sm: 544, // Small screen / phone\r\n        md: 768, // Medium screen / tablet\r\n        lg: 1024, // Large screen / desktop\r\n        xl: 1200 // Extra large screen / wide desktop\r\n    };\r\n\r\n    /**\r\n     * Handle window resize event with some\r\n     * delay to attach event handlers upon resize complete\r\n     */\r\n    var _windowResizeHandler = function() {\r\n        var _runResizeHandlers = function() {\r\n            // reinitialize other subscribed elements\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                var each = resizeHandlers[i];\r\n                each.call();\r\n            }\r\n        };\r\n\r\n        var timeout = false; // holder for timeout id\r\n        var delay = 250; // delay after event is \"complete\" to run callback\r\n\r\n        window.addEventListener('resize', function() {\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(function() {\r\n                _runResizeHandlers();\r\n            }, delay); // wait 50ms until window resize finishes.\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Class main initializer.\r\n         * @param {object} options.\r\n         * @returns null\r\n         */\r\n        //main function to initiate the theme\r\n        init: function(options) {\r\n            if (options && options.breakpoints) {\r\n                breakpoints = options.breakpoints;\r\n            }\r\n\r\n            _windowResizeHandler();\r\n        },\r\n\r\n        /**\r\n         * Adds window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        addResizeHandler: function(callback) {\r\n            resizeHandlers.push(callback);\r\n        },\r\n\r\n        /**\r\n         * Removes window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        removeResizeHandler: function(callback) {\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                if (callback === resizeHandlers[i]) {\r\n                    delete resizeHandlers[i];\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger window resize handlers.\r\n         */\r\n        runResizeHandlers: function() {\r\n            _runResizeHandlers();\r\n        },\r\n\r\n        resize: function() {\r\n            if (typeof(Event) === 'function') {\r\n                // modern browsers\r\n                window.dispatchEvent(new Event('resize'));\r\n            } else {\r\n                // for IE and other old browsers\r\n                // causes deprecation warning on modern browsers\r\n                var evt = window.document.createEvent('UIEvents');\r\n                evt.initUIEvent('resize', true, false, window, 0);\r\n                window.dispatchEvent(evt);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get GET parameter value from URL.\r\n         * @param {string} paramName Parameter name.\r\n         * @returns {string}\r\n         */\r\n        getURLParam: function(paramName) {\r\n            var searchString = window.location.search.substring(1),\r\n                i, val, params = searchString.split(\"&\");\r\n\r\n            for (i = 0; i < params.length; i++) {\r\n                val = params[i].split(\"=\");\r\n                if (val[0] == paramName) {\r\n                    return unescape(val[1]);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is mobile touch.\r\n         * @returns {boolean}\r\n         */\r\n        isMobileDevice: function() {\r\n            return (this.getViewPort().width < this.getBreakpoint('lg') ? true : false);\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is desktop.\r\n         * @returns {boolean}\r\n         */\r\n        isDesktopDevice: function() {\r\n            return KTUtil.isMobileDevice() ? false : true;\r\n        },\r\n\r\n        /**\r\n         * Gets browser window viewport size. Ref:\r\n         * http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\r\n         * @returns {object}\r\n         */\r\n        getViewPort: function() {\r\n            var e = window,\r\n                a = 'inner';\r\n            if (!('innerWidth' in window)) {\r\n                a = 'client';\r\n                e = document.documentElement || document.body;\r\n            }\r\n\r\n            return {\r\n                width: e[a + 'Width'],\r\n                height: e[a + 'Height']\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Checks whether given device mode is currently activated.\r\n         * @param {string} mode Responsive mode name(e.g: desktop,\r\n         *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\r\n         * @returns {boolean}\r\n         */\r\n        isInResponsiveRange: function(mode) {\r\n            var breakpoint = this.getViewPort().width;\r\n\r\n            if (mode == 'general') {\r\n                return true;\r\n            } else if (mode == 'desktop' && breakpoint >= (this.getBreakpoint('lg') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet' && (breakpoint >= (this.getBreakpoint('md') + 1) && breakpoint < this.getBreakpoint('lg'))) {\r\n                return true;\r\n            } else if (mode == 'mobile' && breakpoint <= this.getBreakpoint('md')) {\r\n                return true;\r\n            } else if (mode == 'desktop-and-tablet' && breakpoint >= (this.getBreakpoint('md') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet-and-mobile' && breakpoint <= this.getBreakpoint('lg')) {\r\n                return true;\r\n            } else if (mode == 'minimal-desktop-and-below' && breakpoint <= this.getBreakpoint('xl')) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Generates unique ID for give prefix.\r\n         * @param {string} prefix Prefix for generated ID\r\n         * @returns {boolean}\r\n         */\r\n        getUniqueID: function(prefix) {\r\n            return prefix + Math.floor(Math.random() * (new Date()).getTime());\r\n        },\r\n\r\n        /**\r\n         * Gets window width for give breakpoint mode.\r\n         * @param {string} mode Responsive mode name(e.g: xl, lg, md, sm)\r\n         * @returns {number}\r\n         */\r\n        getBreakpoint: function(mode) {\r\n            return breakpoints[mode];\r\n        },\r\n\r\n        /**\r\n         * Checks whether object has property matchs given key path.\r\n         * @param {object} obj Object contains values paired with given key path\r\n         * @param {string} keys Keys path seperated with dots\r\n         * @returns {object}\r\n         */\r\n        isset: function(obj, keys) {\r\n            var stone;\r\n\r\n            keys = keys || '';\r\n\r\n            if (keys.indexOf('[') !== -1) {\r\n                throw new Error('Unsupported object path notation.');\r\n            }\r\n\r\n            keys = keys.split('.');\r\n\r\n            do {\r\n                if (obj === undefined) {\r\n                    return false;\r\n                }\r\n\r\n                stone = keys.shift();\r\n\r\n                if (!obj.hasOwnProperty(stone)) {\r\n                    return false;\r\n                }\r\n\r\n                obj = obj[stone];\r\n\r\n            } while (keys.length);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Gets highest z-index of the given element parents\r\n         * @param {object} el jQuery element object\r\n         * @returns {number}\r\n         */\r\n        getHighestZindex: function(el) {\r\n            var elem = KTUtil.get(el),\r\n                position, value;\r\n\r\n            while (elem && elem !== document) {\r\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n                // This makes behavior of this function consistent across browsers\r\n                // WebKit always returns auto if the element is positioned\r\n                position = KTUtil.css(elem, 'position');\r\n\r\n                if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\r\n                    // IE returns 0 when zIndex is not specified\r\n                    // other browsers return a string\r\n                    // we ignore the case of nested elements with an explicit value of 0\r\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n                    value = parseInt(KTUtil.css(elem, 'z-index'));\r\n\r\n                    if (!isNaN(value) && value !== 0) {\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                elem = elem.parentNode;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has any parent with fixed positionfreg\r\n         * @param {object} el jQuery element object\r\n         * @returns {boolean}\r\n         */\r\n        hasFixedPositionedParent: function(el) {\r\n            var position;\r\n\r\n            while (el && el !== document) {\r\n                position = KTUtil.css(el, 'position');\r\n\r\n                if (position === \"fixed\") {\r\n                    return true;\r\n                }\r\n\r\n                el = el.parentNode;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Simulates delay\r\n         */\r\n        sleep: function(milliseconds) {\r\n            var start = new Date().getTime();\r\n            for (var i = 0; i < 1e7; i++) {\r\n                if ((new Date().getTime() - start) > milliseconds) {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets randomly generated integer value within given min and max range\r\n         * @param {number} min Range start value\r\n         * @param {number} max Range end value\r\n         * @returns {number}\r\n         */\r\n        getRandomInt: function(min, max) {\r\n            return Math.floor(Math.random() * (max - min + 1)) + min;\r\n        },\r\n\r\n        /**\r\n         * Checks whether Angular library is included\r\n         * @returns {boolean}\r\n         */\r\n        isAngularVersion: function() {\r\n            return window.Zone !== undefined ? true : false;\r\n        },\r\n\r\n        // jQuery Workarounds\r\n\r\n        // Deep extend:  $.extend(true, {}, objA, objB);\r\n        deepExtend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                var obj = arguments[i];\r\n\r\n                if (!obj)\r\n                    continue;\r\n\r\n                for (var key in obj) {\r\n                    if (obj.hasOwnProperty(key)) {\r\n                        if (typeof obj[key] === 'object')\r\n                            out[key] = KTUtil.deepExtend(out[key], obj[key]);\r\n                        else\r\n                            out[key] = obj[key];\r\n                    }\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        // extend:  $.extend({}, objA, objB);\r\n        extend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                if (!arguments[i])\r\n                    continue;\r\n\r\n                for (var key in arguments[i]) {\r\n                    if (arguments[i].hasOwnProperty(key))\r\n                        out[key] = arguments[i][key];\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        get: function(query) {\r\n            var el;\r\n\r\n            if (query === document) {\r\n                return document;\r\n            }\r\n\r\n            if (!!(query && query.nodeType === 1)) {\r\n                return query;\r\n            }\r\n\r\n            if (el = document.getElementById(query)) {\r\n                return el;\r\n            } else if (el = document.getElementsByTagName(query), el.length > 0) {\r\n                return el[0];\r\n            } else if (el = document.getElementsByClassName(query), el.length > 0) {\r\n                return el[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        getByID: function(query) {\r\n            if (!!(query && query.nodeType === 1)) {\r\n                return query;\r\n            }\r\n\r\n            return document.getElementById(query);\r\n        },\r\n\r\n        getByTag: function(query) {\r\n            var el;\r\n\r\n            if (el = document.getElementsByTagName(query)) {\r\n                return el[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        getByClass: function(query) {\r\n            var el;\r\n\r\n            if (el = document.getElementsByClassName(query)) {\r\n                return el[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has given classes\r\n         * @param {object} el jQuery element object\r\n         * @param {string} Classes string\r\n         * @returns {boolean}\r\n         */\r\n        hasClasses: function(el, classes) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var classesArr = classes.split(\" \");\r\n\r\n            for (var i = 0; i < classesArr.length; i++) {\r\n                if (KTUtil.hasClass(el, KTUtil.trim(classesArr[i])) == false) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        hasClass: function(el, className) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\r\n        },\r\n\r\n        addClass: function(el, className) {\r\n            if (!el || typeof className === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    if (classNames[i] && classNames[i].length > 0) {\r\n                        el.classList.add(KTUtil.trim(classNames[i]));\r\n                    }\r\n                }\r\n            } else if (!KTUtil.hasClass(el, className)) {\r\n                for (var x = 0; x < classNames.length; x++) {\r\n                    el.className += ' ' + KTUtil.trim(classNames[x]);\r\n                }\r\n            }\r\n        },\r\n\r\n        removeClass: function(el, className) {\r\n          if (!el || typeof className === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    el.classList.remove(KTUtil.trim(classNames[i]));\r\n                }\r\n            } else if (KTUtil.hasClass(el, className)) {\r\n                for (var x = 0; x < classNames.length; x++) {\r\n                    el.className = el.className.replace(new RegExp('\\\\b' + KTUtil.trim(classNames[x]) + '\\\\b', 'g'), '');\r\n                }\r\n            }\r\n        },\r\n\r\n        triggerCustomEvent: function(el, eventName, data) {\r\n            var event;\r\n            if (window.CustomEvent) {\r\n                event = new CustomEvent(eventName, {\r\n                    detail: data\r\n                });\r\n            } else {\r\n                event = document.createEvent('CustomEvent');\r\n                event.initCustomEvent(eventName, true, true, data);\r\n            }\r\n\r\n            el.dispatchEvent(event);\r\n        },\r\n\r\n        triggerEvent: function(node, eventName) {\r\n            // Make sure we use the ownerDocument from the provided node to avoid cross-window problems\r\n            var doc;\r\n            if (node.ownerDocument) {\r\n                doc = node.ownerDocument;\r\n            } else if (node.nodeType == 9) {\r\n                // the node may be the document itself, nodeType 9 = DOCUMENT_NODE\r\n                doc = node;\r\n            } else {\r\n                throw new Error(\"Invalid node passed to fireEvent: \" + node.id);\r\n            }\r\n\r\n            if (node.dispatchEvent) {\r\n                // Gecko-style approach (now the standard) takes more work\r\n                var eventClass = \"\";\r\n\r\n                // Different events have different event classes.\r\n                // If this switch statement can't map an eventName to an eventClass,\r\n                // the event firing is going to fail.\r\n                switch (eventName) {\r\n                case \"click\": // Dispatching of 'click' appears to not work correctly in Safari. Use 'mousedown' or 'mouseup' instead.\r\n                case \"mouseenter\":\r\n                case \"mouseleave\":\r\n                case \"mousedown\":\r\n                case \"mouseup\":\r\n                    eventClass = \"MouseEvents\";\r\n                    break;\r\n\r\n                case \"focus\":\r\n                case \"change\":\r\n                case \"blur\":\r\n                case \"select\":\r\n                    eventClass = \"HTMLEvents\";\r\n                    break;\r\n\r\n                default:\r\n                    throw \"fireEvent: Couldn't find an event class for event '\" + eventName + \"'.\";\r\n                    break;\r\n                }\r\n                var event = doc.createEvent(eventClass);\r\n\r\n                var bubbles = eventName == \"change\" ? false : true;\r\n                event.initEvent(eventName, bubbles, true); // All events created as bubbling and cancelable.\r\n\r\n                event.synthetic = true; // allow detection of synthetic events\r\n                // The second parameter says go ahead with the default action\r\n                node.dispatchEvent(event, true);\r\n            } else if (node.fireEvent) {\r\n                // IE-old school style\r\n                var event = doc.createEventObject();\r\n                event.synthetic = true; // allow detection of synthetic events\r\n                node.fireEvent(\"on\" + eventName, event);\r\n            }\r\n        },\r\n\r\n        index: function( elm ){\r\n            elm = KTUtil.get(elm);\r\n            var c = elm.parentNode.children, i = 0;\r\n            for(; i < c.length; i++ )\r\n                if( c[i] == elm ) return i;\r\n        },\r\n\r\n        trim: function(string) {\r\n            return string.trim();\r\n        },\r\n\r\n        eventTriggered: function(e) {\r\n            if (e.currentTarget.dataset.triggered) {\r\n                return true;\r\n            } else {\r\n                e.currentTarget.dataset.triggered = true;\r\n\r\n                return false;\r\n            }\r\n        },\r\n\r\n        remove: function(el) {\r\n            if (el && el.parentNode) {\r\n                el.parentNode.removeChild(el);\r\n            }\r\n        },\r\n\r\n        find: function(parent, query) {\r\n            parent = KTUtil.get(parent);\r\n            if (parent) {\r\n                return parent.querySelector(query);\r\n            }\r\n        },\r\n\r\n        findAll: function(parent, query) {\r\n            parent = KTUtil.get(parent);\r\n            if (parent) {\r\n                return parent.querySelectorAll(query);\r\n            }\r\n        },\r\n\r\n        insertAfter: function(el, referenceNode) {\r\n            return referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\r\n        },\r\n\r\n        parents: function(elem, selector) {\r\n            // Element.matches() polyfill\r\n            if (!Element.prototype.matches) {\r\n                Element.prototype.matches =\r\n                    Element.prototype.matchesSelector ||\r\n                    Element.prototype.mozMatchesSelector ||\r\n                    Element.prototype.msMatchesSelector ||\r\n                    Element.prototype.oMatchesSelector ||\r\n                    Element.prototype.webkitMatchesSelector ||\r\n                    function(s) {\r\n                        var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                            i = matches.length;\r\n                        while (--i >= 0 && matches.item(i) !== this) {}\r\n                        return i > -1;\r\n                    };\r\n            }\r\n\r\n            // Set up a parent array\r\n            var parents = [];\r\n\r\n            // Push each parent element to the array\r\n            for ( ; elem && elem !== document; elem = elem.parentNode ) {\r\n                if (selector) {\r\n                    if (elem.matches(selector)) {\r\n                        parents.push(elem);\r\n                    }\r\n                    continue;\r\n                }\r\n                parents.push(elem);\r\n            }\r\n\r\n            // Return our parent array\r\n            return parents;\r\n        },\r\n\r\n        children: function(el, selector, log) {\r\n            if (!el || !el.childNodes) {\r\n                return;\r\n            }\r\n\r\n            var result = [],\r\n                i = 0,\r\n                l = el.childNodes.length;\r\n\r\n            for (var i; i < l; ++i) {\r\n                if (el.childNodes[i].nodeType == 1 && KTUtil.matches(el.childNodes[i], selector, log)) {\r\n                    result.push(el.childNodes[i]);\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        child: function(el, selector, log) {\r\n            var children = KTUtil.children(el, selector, log);\r\n\r\n            return children ? children[0] : null;\r\n        },\r\n\r\n        matches: function(el, selector, log) {\r\n            var p = Element.prototype;\r\n            var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function(s) {\r\n                return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\r\n            };\r\n\r\n            if (el && el.tagName) {\r\n                return f.call(el, selector);\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        data: function(element) {\r\n            element = KTUtil.get(element);\r\n\r\n            return {\r\n                set: function(name, data) {\r\n                    if (element === undefined) {\r\n                        return;\r\n                    }\r\n\r\n                    if (element.customDataTag === undefined) {\r\n                        window.KTUtilElementDataStoreID++;\r\n                        element.customDataTag = window.KTUtilElementDataStoreID;\r\n                    }\r\n\r\n                    if (window.KTUtilElementDataStore[element.customDataTag] === undefined) {\r\n                        window.KTUtilElementDataStore[element.customDataTag] = {};\r\n                    }\r\n\r\n                    window.KTUtilElementDataStore[element.customDataTag][name] = data;\r\n                },\r\n\r\n                get: function(name) {\r\n                    if (element === undefined) {\r\n                        return;\r\n                    }\r\n\r\n                    if (element.customDataTag === undefined) {\r\n                        return null;\r\n                    }\r\n\r\n                    return this.has(name) ? window.KTUtilElementDataStore[element.customDataTag][name] : null;\r\n                },\r\n\r\n                has: function(name) {\r\n                    if (element === undefined) {\r\n                        return false;\r\n                    }\r\n\r\n                    if (element.customDataTag === undefined) {\r\n                        return false;\r\n                    }\r\n\r\n                    return (window.KTUtilElementDataStore[element.customDataTag] && window.KTUtilElementDataStore[element.customDataTag][name]) ? true : false;\r\n                },\r\n\r\n                remove: function(name) {\r\n                    if (element && this.has(name)) {\r\n                        delete window.KTUtilElementDataStore[element.customDataTag][name];\r\n                    }\r\n                }\r\n            };\r\n        },\r\n\r\n        outerWidth: function(el, margin) {\r\n            var width;\r\n\r\n            if (margin === true) {\r\n                width = parseFloat(el.offsetWidth);\r\n                width += parseFloat(KTUtil.css(el, 'margin-left')) + parseFloat(KTUtil.css(el, 'margin-right'));\r\n\r\n                return parseFloat(width);\r\n            } else {\r\n                width = parseFloat(el.offsetWidth);\r\n\r\n                return width;\r\n            }\r\n        },\r\n\r\n        offset: function(elem) {\r\n            var rect, win;\r\n            elem = KTUtil.get(elem);\r\n\r\n            if ( !elem ) {\r\n                return;\r\n            }\r\n\r\n            // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\r\n            // Support: IE <=11 only\r\n            // Running getBoundingClientRect on a\r\n            // disconnected node in IE throws an error\r\n\r\n            if ( !elem.getClientRects().length ) {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n            // Get document-relative position by adding viewport scroll to viewport-relative gBCR\r\n            rect = elem.getBoundingClientRect();\r\n            win = elem.ownerDocument.defaultView;\r\n\r\n            return {\r\n                top: rect.top + win.pageYOffset,\r\n                left: rect.left + win.pageXOffset\r\n            };\r\n        },\r\n\r\n        height: function(el) {\r\n            return KTUtil.css(el, 'height');\r\n        },\r\n\r\n        visible: function(el) {\r\n            return !(el.offsetWidth === 0 && el.offsetHeight === 0);\r\n        },\r\n\r\n        attr: function(el, name, value) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.setAttribute(name, value);\r\n            } else {\r\n                return el.getAttribute(name);\r\n            }\r\n        },\r\n\r\n        hasAttr: function(el, name) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            return el.getAttribute(name) ? true : false;\r\n        },\r\n\r\n        removeAttr: function(el, name) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            el.removeAttribute(name);\r\n        },\r\n\r\n        animate: function(from, to, duration, update, easing, done) {\r\n            /**\r\n             * TinyAnimate.easings\r\n             *  Adapted from jQuery Easing\r\n             */\r\n            var easings = {};\r\n            var easing;\r\n\r\n            easings.linear = function(t, b, c, d) {\r\n                return c * t / d + b;\r\n            };\r\n\r\n            easing = easings.linear;\r\n\r\n            // Early bail out if called incorrectly\r\n            if (typeof from !== 'number' ||\r\n                typeof to !== 'number' ||\r\n                typeof duration !== 'number' ||\r\n                typeof update !== 'function') {\r\n                return;\r\n            }\r\n\r\n            // Create mock done() function if necessary\r\n            if (typeof done !== 'function') {\r\n                done = function() {};\r\n            }\r\n\r\n            // Pick implementation (requestAnimationFrame | setTimeout)\r\n            var rAF = window.requestAnimationFrame || function(callback) {\r\n                window.setTimeout(callback, 1000 / 50);\r\n            };\r\n\r\n            // Animation loop\r\n            var canceled = false;\r\n            var change = to - from;\r\n\r\n            function loop(timestamp) {\r\n                var time = (timestamp || +new Date()) - start;\r\n\r\n                if (time >= 0) {\r\n                    update(easing(time, from, change, duration));\r\n                }\r\n                if (time >= 0 && time >= duration) {\r\n                    update(to);\r\n                    done();\r\n                } else {\r\n                    rAF(loop);\r\n                }\r\n            }\r\n\r\n            update(from);\r\n\r\n            // Start animation loop\r\n            var start = window.performance && window.performance.now ? window.performance.now() : +new Date();\r\n\r\n            rAF(loop);\r\n        },\r\n\r\n        actualCss: function(el, prop, cache) {\r\n            el = KTUtil.get(el);\r\n            var css = '';\r\n\r\n            if (el instanceof HTMLElement === false) {\r\n                return;\r\n            }\r\n\r\n            if (!el.getAttribute('kt-hidden-' + prop) || cache === false) {\r\n                var value;\r\n\r\n                // the element is hidden so:\r\n                // making the el block so we can meassure its height but still be hidden\r\n                css = el.style.cssText;\r\n                el.style.cssText = 'position: absolute; visibility: hidden; display: block;';\r\n\r\n                if (prop == 'width') {\r\n                    value = el.offsetWidth;\r\n                } else if (prop == 'height') {\r\n                    value = el.offsetHeight;\r\n                }\r\n\r\n                el.style.cssText = css;\r\n\r\n                // store it in cache\r\n                el.setAttribute('kt-hidden-' + prop, value);\r\n\r\n                return parseFloat(value);\r\n            } else {\r\n                // store it in cache\r\n                return parseFloat(el.getAttribute('kt-hidden-' + prop));\r\n            }\r\n        },\r\n\r\n        actualHeight: function(el, cache) {\r\n            return KTUtil.actualCss(el, 'height', cache);\r\n        },\r\n\r\n        actualWidth: function(el, cache) {\r\n            return KTUtil.actualCss(el, 'width', cache);\r\n        },\r\n\r\n        getScroll: function(element, method) {\r\n            // The passed in `method` value should be 'Top' or 'Left'\r\n            method = 'scroll' + method;\r\n            return (element == window || element == document) ? (\r\n                self[(method == 'scrollTop') ? 'pageYOffset' : 'pageXOffset'] ||\r\n                (browserSupportsBoxModel && document.documentElement[method]) ||\r\n                document.body[method]\r\n            ) : element[method];\r\n        },\r\n\r\n        css: function(el, styleProp, value) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.style[styleProp] = value;\r\n            } else {\r\n                var defaultView = (el.ownerDocument || document).defaultView;\r\n                // W3C standard way:\r\n                if (defaultView && defaultView.getComputedStyle) {\r\n                    // sanitize property name to css notation\r\n                    // (hyphen separated words eg. font-Size)\r\n                    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n                    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n                } else if (el.currentStyle) { // IE\r\n                    // sanitize property name to camelCase\r\n                    styleProp = styleProp.replace(/\\-(\\w)/g, function(str, letter) {\r\n                        return letter.toUpperCase();\r\n                    });\r\n                    value = el.currentStyle[styleProp];\r\n                    // convert other units to pixels on IE\r\n                    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) {\r\n                        return (function(value) {\r\n                            var oldLeft = el.style.left,\r\n                                oldRsLeft = el.runtimeStyle.left;\r\n                            el.runtimeStyle.left = el.currentStyle.left;\r\n                            el.style.left = value || 0;\r\n                            value = el.style.pixelLeft + \"px\";\r\n                            el.style.left = oldLeft;\r\n                            el.runtimeStyle.left = oldRsLeft;\r\n                            return value;\r\n                        })(value);\r\n                    }\r\n                    return value;\r\n                }\r\n            }\r\n        },\r\n\r\n        slide: function(el, dir, speed, callback, recalcMaxHeight) {\r\n            if (!el || (dir == 'up' && KTUtil.visible(el) === false) || (dir == 'down' && KTUtil.visible(el) === true)) {\r\n                return;\r\n            }\r\n\r\n            speed = (speed ? speed : 600);\r\n            var calcHeight = KTUtil.actualHeight(el);\r\n            var calcPaddingTop = false;\r\n            var calcPaddingBottom = false;\r\n\r\n            if (KTUtil.css(el, 'padding-top') && KTUtil.data(el).has('slide-padding-top') !== true) {\r\n                KTUtil.data(el).set('slide-padding-top', KTUtil.css(el, 'padding-top'));\r\n            }\r\n\r\n            if (KTUtil.css(el, 'padding-bottom') && KTUtil.data(el).has('slide-padding-bottom') !== true) {\r\n                KTUtil.data(el).set('slide-padding-bottom', KTUtil.css(el, 'padding-bottom'));\r\n            }\r\n\r\n            if (KTUtil.data(el).has('slide-padding-top')) {\r\n                calcPaddingTop = parseInt(KTUtil.data(el).get('slide-padding-top'));\r\n            }\r\n\r\n            if (KTUtil.data(el).has('slide-padding-bottom')) {\r\n                calcPaddingBottom = parseInt(KTUtil.data(el).get('slide-padding-bottom'));\r\n            }\r\n\r\n            if (dir == 'up') { // up\r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    KTUtil.animate(0, calcPaddingTop, speed, function(value) {\r\n                        el.style.paddingTop = (calcPaddingTop - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    KTUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = (calcPaddingBottom - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                KTUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = (calcHeight - value) + 'px';\r\n                }, 'linear', function() {\r\n                    callback();\r\n                    el.style.height = '';\r\n                    el.style.display = 'none';\r\n                });\r\n\r\n\r\n            } else if (dir == 'down') { // down\r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    KTUtil.animate(0, calcPaddingTop, speed, function(value) {\r\n                        el.style.paddingTop = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingTop = '';\r\n                    });\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    KTUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingBottom = '';\r\n                    });\r\n                }\r\n\r\n                KTUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = value + 'px';\r\n                }, 'linear', function() {\r\n                    callback();\r\n                    el.style.height = '';\r\n                    el.style.display = '';\r\n                    el.style.overflow = '';\r\n                });\r\n            }\r\n        },\r\n\r\n        slideUp: function(el, speed, callback) {\r\n            KTUtil.slide(el, 'up', speed, callback);\r\n        },\r\n\r\n        slideDown: function(el, speed, callback) {\r\n            KTUtil.slide(el, 'down', speed, callback);\r\n        },\r\n\r\n        show: function(el, display) {\r\n            if (typeof el !== 'undefined') {\r\n                el.style.display = (display ? display : 'block');\r\n            }\r\n        },\r\n\r\n        hide: function(el) {\r\n            if (typeof el !== 'undefined') {\r\n                el.style.display = 'none';\r\n            }\r\n        },\r\n\r\n        addEvent: function(el, type, handler, one) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (typeof el !== 'undefined' && el !== null) {\r\n                el.addEventListener(type, handler);\r\n            }\r\n        },\r\n\r\n        removeEvent: function(el, type, handler) {\r\n            el = KTUtil.get(el);\r\n\r\n            if (el !== null) {\r\n                el.removeEventListener(type, handler);\r\n            }\r\n        },\r\n\r\n        on: function(element, selector, event, handler) {\r\n            if (!selector) {\r\n                return;\r\n            }\r\n\r\n            var eventId = KTUtil.getUniqueID('event');\r\n\r\n            window.KTUtilDelegatedEventHandlers[eventId] = function(e) {\r\n                var targets = element.querySelectorAll(selector);\r\n                var target = e.target;\r\n\r\n                while (target && target !== element) {\r\n                    for (var i = 0, j = targets.length; i < j; i++) {\r\n                        if (target === targets[i]) {\r\n                            handler.call(target, e);\r\n                        }\r\n                    }\r\n\r\n                    target = target.parentNode;\r\n                }\r\n            }\r\n\r\n            KTUtil.addEvent(element, event, window.KTUtilDelegatedEventHandlers[eventId]);\r\n\r\n            return eventId;\r\n        },\r\n\r\n        off: function(element, event, eventId) {\r\n            if (!element || !window.KTUtilDelegatedEventHandlers[eventId]) {\r\n                return;\r\n            }\r\n\r\n            KTUtil.removeEvent(element, event, window.KTUtilDelegatedEventHandlers[eventId]);\r\n\r\n            delete window.KTUtilDelegatedEventHandlers[eventId];\r\n        },\r\n\r\n        one: function onetime(el, type, callback) {\r\n            el = KTUtil.get(el);\r\n\r\n            el.addEventListener(type, function callee(e) {\r\n                // remove event\r\n                if (e.target && e.target.removeEventListener) {\r\n                    e.target.removeEventListener(e.type, callee);\r\n                }\r\n\r\n                // call handler\r\n                return callback(e);\r\n            });\r\n        },\r\n\r\n        hash: function(str) {\r\n            var hash = 0,\r\n                i, chr;\r\n\r\n            if (str.length === 0) return hash;\r\n            for (i = 0; i < str.length; i++) {\r\n                chr = str.charCodeAt(i);\r\n                hash = ((hash << 5) - hash) + chr;\r\n                hash |= 0; // Convert to 32bit integer\r\n            }\r\n\r\n            return hash;\r\n        },\r\n\r\n        animateClass: function(el, animationName, callback) {\r\n            var animation;\r\n            var animations = {\r\n                animation: 'animationend',\r\n                OAnimation: 'oAnimationEnd',\r\n                MozAnimation: 'mozAnimationEnd',\r\n                WebkitAnimation: 'webkitAnimationEnd',\r\n                msAnimation: 'msAnimationEnd',\r\n            };\r\n\r\n            for (var t in animations) {\r\n                if (el.style[t] !== undefined) {\r\n                    animation = animations[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.addClass(el, 'animated ' + animationName);\r\n\r\n            KTUtil.one(el, animation, function() {\r\n                KTUtil.removeClass(el, 'animated ' + animationName);\r\n            });\r\n\r\n            if (callback) {\r\n                KTUtil.one(el, animation, callback);\r\n            }\r\n        },\r\n\r\n        transitionEnd: function(el, callback) {\r\n            var transition;\r\n            var transitions = {\r\n                transition: 'transitionend',\r\n                OTransition: 'oTransitionEnd',\r\n                MozTransition: 'mozTransitionEnd',\r\n                WebkitTransition: 'webkitTransitionEnd',\r\n                msTransition: 'msTransitionEnd'\r\n            };\r\n\r\n            for (var t in transitions) {\r\n                if (el.style[t] !== undefined) {\r\n                    transition = transitions[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.one(el, transition, callback);\r\n        },\r\n\r\n        animationEnd: function(el, callback) {\r\n            var animation;\r\n            var animations = {\r\n                animation: 'animationend',\r\n                OAnimation: 'oAnimationEnd',\r\n                MozAnimation: 'mozAnimationEnd',\r\n                WebkitAnimation: 'webkitAnimationEnd',\r\n                msAnimation: 'msAnimationEnd'\r\n            };\r\n\r\n            for (var t in animations) {\r\n                if (el.style[t] !== undefined) {\r\n                    animation = animations[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.one(el, animation, callback);\r\n        },\r\n\r\n        animateDelay: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                KTUtil.css(el, vendors[i] + 'animation-delay', value);\r\n            }\r\n        },\r\n\r\n        animateDuration: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                KTUtil.css(el, vendors[i] + 'animation-duration', value);\r\n            }\r\n        },\r\n\r\n        scrollTo: function(target, offset, duration) {\r\n            var duration = duration ? duration : 500;\r\n            var target = KTUtil.get(target);\r\n            var targetPos = target ? KTUtil.offset(target).top : 0;\r\n            var scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\r\n            var from, to;\r\n\r\n            if (offset) {\r\n                scrollPos += offset;\r\n            }\r\n\r\n            from = scrollPos;\r\n            to = targetPos;\r\n\r\n            KTUtil.animate(from, to, duration, function(value) {\r\n                document.documentElement.scrollTop = value;\r\n                document.body.parentNode.scrollTop = value;\r\n                document.body.scrollTop = value;\r\n            }); //, easing, done\r\n        },\r\n\r\n        scrollTop: function(offset, duration) {\r\n            KTUtil.scrollTo(null, offset, duration);\r\n        },\r\n\r\n        isArray: function(obj) {\r\n            return obj && Array.isArray(obj);\r\n        },\r\n\r\n        ready: function(callback) {\r\n            if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\r\n                callback();\r\n            } else {\r\n                document.addEventListener('DOMContentLoaded', callback);\r\n            }\r\n        },\r\n\r\n        isEmpty: function(obj) {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        numberString: function(nStr) {\r\n            nStr += '';\r\n            var x = nStr.split('.');\r\n            var x1 = x[0];\r\n            var x2 = x.length > 1 ? '.' + x[1] : '';\r\n            var rgx = /(\\d+)(\\d{3})/;\r\n            while (rgx.test(x1)) {\r\n                x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n            }\r\n            return x1 + x2;\r\n        },\r\n\r\n        detectIE: function() {\r\n            var ua = window.navigator.userAgent;\r\n\r\n            // Test values; Uncomment to check result \r\n\r\n            // IE 10\r\n            // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\r\n\r\n            // IE 11\r\n            // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\r\n\r\n            // Edge 12 (Spartan)\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\r\n\r\n            // Edge 13\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\r\n\r\n            var msie = ua.indexOf('MSIE ');\r\n            if (msie > 0) {\r\n                // IE 10 or older => return version number\r\n                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n            }\r\n\r\n            var trident = ua.indexOf('Trident/');\r\n            if (trident > 0) {\r\n                // IE 11 => return version number\r\n                var rv = ua.indexOf('rv:');\r\n                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n            }\r\n\r\n            var edge = ua.indexOf('Edge/');\r\n            if (edge > 0) {\r\n                // Edge (IE 12+) => return version number\r\n                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n            }\r\n\r\n            // other browser\r\n            return false;\r\n        },\r\n\r\n        isRTL: function() {\r\n            return (KTUtil.attr(KTUtil.get('html'), 'direction') == 'rtl');\r\n        },\r\n\r\n        //\r\n\r\n        // Scroller\r\n        scrollInit: function(element, options) {\r\n            if(!element) return;\r\n            // Define init function\r\n            function init() {\r\n                var ps;\r\n                var height;\r\n\r\n                if (options.height instanceof Function) {\r\n                    height = parseInt(options.height.call());\r\n                } else {\r\n                    height = parseInt(options.height);\r\n                }\r\n\r\n                // Destroy scroll on table and mobile modes\r\n                if ((options.mobileNativeScroll || options.disableForMobile) && KTUtil.isInResponsiveRange('tablet-and-mobile')) {\r\n                    ps = KTUtil.data(element).get('ps');\r\n                    if (ps) {\r\n                        if (options.resetHeightOnDestroy) {\r\n                            KTUtil.css(element, 'height', 'auto');\r\n                        } else {\r\n                            KTUtil.css(element, 'overflow', 'auto');\r\n                            if (height > 0) {\r\n                                KTUtil.css(element, 'height', height + 'px');\r\n                            }\r\n                        }\r\n\r\n                        ps.destroy();\r\n                        ps = KTUtil.data(element).remove('ps');\r\n                    } else if (height > 0){\r\n                        KTUtil.css(element, 'overflow', 'auto');\r\n                        KTUtil.css(element, 'height', height + 'px');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (height > 0) {\r\n                    KTUtil.css(element, 'height', height + 'px');\r\n                }\r\n\r\n                if (options.desktopNativeScroll) {\r\n                    KTUtil.css(element, 'overflow', 'auto');\r\n                    return;\r\n                }\r\n\r\n                // Init scroll\r\n                KTUtil.css(element, 'overflow', 'hidden');\r\n\r\n                ps = KTUtil.data(element).get('ps');\r\n                if (ps) {\r\n                    ps.update();\r\n                } else {\r\n                    KTUtil.addClass(element, 'kt-scroll');\r\n                    ps = new PerfectScrollbar(element, {\r\n                        wheelSpeed: 0.5,\r\n                        swipeEasing: true,\r\n                        wheelPropagation: (options.windowScroll === false ? false : true),\r\n                        minScrollbarLength: 40,\r\n                        maxScrollbarLength: 300,\r\n                        suppressScrollX: KTUtil.attr(element, 'data-scroll-x') != 'true' ? true : false\r\n                    });\r\n\r\n                    KTUtil.data(element).set('ps', ps);\r\n                }\r\n\r\n                // Remember scroll position in cookie\r\n                var uid = KTUtil.attr(element, 'id');\r\n\r\n                if (options.rememberPosition === true && Cookies && uid) {\r\n                    if (Cookies.get(uid)) {\r\n                        var pos = parseInt(Cookies.get(uid));\r\n\r\n                        if (pos > 0) {\r\n                            element.scrollTop = pos;\r\n                        }\r\n                    }\r\n\r\n                    element.addEventListener('ps-scroll-y', function() {\r\n                        Cookies.set(uid, element.scrollTop);\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Init\r\n            init();\r\n\r\n            // Handle window resize\r\n            if (options.handleWindowResize) {\r\n                KTUtil.addResizeHandler(function() {\r\n                    init();\r\n                });\r\n            }\r\n        },\r\n\r\n        scrollUpdate: function(element) {\r\n            var ps = KTUtil.data(element).get('ps');\r\n            if (ps) {\r\n                ps.update();\r\n            }\r\n        },\r\n\r\n        scrollUpdateAll: function(parent) {\r\n            var scrollers = KTUtil.findAll(parent, '.ps');\r\n            for (var i = 0, len = scrollers.length; i < len; i++) {\r\n                KTUtil.scrollUpdate(scrollers[i]);\r\n            }\r\n        },\r\n\r\n        scrollDestroy: function(element) {\r\n            var ps = KTUtil.data(element).get('ps');\r\n            if (ps) {\r\n                ps.destroy();\r\n                ps = KTUtil.data(element).remove('ps');\r\n            }\r\n        },\r\n\r\n        setHTML: function(el, html) {\r\n            if (KTUtil.get(el)) {\r\n                KTUtil.get(el).innerHTML = html;\r\n            }\r\n        },\r\n\r\n        getHTML: function(el) {\r\n            if (KTUtil.get(el)) {\r\n                return KTUtil.get(el).innerHTML;\r\n            }\r\n        },\r\n\r\n        getDocumentHeight: function() {\r\n            var body = document.body;\r\n            var html = document.documentElement;\r\n\r\n            return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n        },\r\n\r\n        getScrollTop: function() {\r\n            return  (document.scrollingElement || document.documentElement).scrollTop;\r\n        }\r\n    }\r\n}();\r\n\r\n// webpack support\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n    module.exports = KTUtil;\r\n}\r\n\r\n// Initialize KTUtil class on document ready\r\nKTUtil.ready(function() {\r\n    KTUtil.init();\r\n});\r\n\r\n// CSS3 Transitions only after page load(.kt-page-loading class added to body tag and remove with JS on page load)\r\nwindow.onload = function() {\r\n    KTUtil.removeClass(KTUtil.get('body'), 'kt-page--loading');\r\n}\r\n\r\nexport default KTUtil;\r\n"]}]}